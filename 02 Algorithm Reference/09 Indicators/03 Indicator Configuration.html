<h3>Indicator Initialization</h3>

<p>
	As indicators may need data from a lookback period to yield values that are ready to use, we need to warm up the indicator with historical price data. There are two methods.
</p>
<h4>Set the warm-up period</h4>
<p>
	The first method is to set the warm-up period and let the engine automatically update the indicators with data prior to the start date of the algorithm.
	In Initialize(), You can specify a warm-up period with the number of bars <code>SetWarmUp(int barCount)</code>.
	<code>barCount</code> is based on the resolution when you subscribe the asset data.
	If the indicator resolution is different from the data subscription resolution when adding the asset,
	using the time period <code>SetWarmUp(TimeSpan period)</code> or <code>SetWarmup(TimeSpan timeSpan, Resolution resolution)</code>.
	To make sure the data in the warm-up period covers the indicator period, this timespan should be longer than the period in indicator setting because only the trading days has the data.
	See more about the indicator warm-up in the <a class="docs-internal-link" href="/docs/algorithm-reference/historical-data">History</a> section.
	This method can not be used to warm up the indicator in universe selection algorithm.
</p>

<h4>Warm-Up with History Request</h4>
<p>
	The second method is to request the history data to update the indicator in initialization manually.
	See more about using historical data in the <a class="docs-internal-link" href="/docs/algorithm-reference/historical-data">History</a> section.
</p>


<h3>Basic Indicator Usage - shortcut Method</h3>
<p>
	QCAlgorithm provides the shortcut method that creates an indicator and hooks it up to a data consolidator that automatically updates it with data from the desired symbol.
	The first step is to define the indicator.  for one symbol, the indicator should only be defined once.
	In most of indicators you can optionally specified the different <code>Period<code>, <code>MovingAverageType</code> and <code>Resolution<code> to be used in the calculation.
	The resolution of the indicator could be different from the resolution of the securities you add when subscribing the securities data. However, the resolution of the indicator should be equal to or higher than the resolution you specified when adding the asset.
</p>
<p class="python">
	To retrieve the numerical value of any indicator, you need to use the <code>Current.Value</code> attribute of the indicator.
</p>
<div class="section-example-container">
	<pre class="python">
from datetime import timedelta
class BasicIndicatorAlgorithm(QCAlgorithm):
    def Initialize(self):
        self.SetStartDate(2013,10, 7)
        self.SetEndDate(2013,10,11)
        self.SetCash(100000)
				# request the hourly equity data
        self.AddEquity("SPY", Resolution.Hour)
        # define a 10-period daily RSI indicator with shortcut helper method
        self.rsi = self.RSI("SPY", 10,  MovingAverageType.Simple, Resolution.Daily)
        # set a warm-up period to initialize the indicator
        self.SetWarmUp(timedelta(days=25))
				# Warm-up the indicator with bar count
				# self.SetWarmUp(10, Resolution.Daily)

    def OnData(self, data):
        # check if this algorithm is still warming up
        if not self.IsWarmingUp:
            # get the current RSI value
            rsi_value = self.rsi.Current.Value
            # get the current average gain of rsi
            average_gain = self.rsi.AverageGain.Current.Value
            # get the current average gain of rsi
            average_loss = self.rsi.AverageLoss.Current.Value
</pre>
	<pre class="csharp fsharp">
namespace QuantConnect.Algorithm.CSharp
{
    public class BasicTemplateAlgorithm : QCAlgorithm
    {
        private RelativeStrengthIndex _rsi;
        private readonly string _symbol = "SPY";

        public override void Initialize()
        {
        	SetStartDate(2013,10, 7);
        	SetEndDate(2013,10,11);
	        SetCash(100000);
	        // request the hourly equity data
        	AddEquity(_symbol, Resolution.Hour);
					// define a 10-period daily RSI indicator with shortcut helper method
					_rsi = RSI(_symbol, 10,  MovingAverageType.Simple, Resolution.Daily);
		      // set a warm-up period to initialize the indicator
				  SetWarmUp(TimeSpan.FromDays(20));
					// Or warm up the indicator with bar count
					// SetWarmUp(10, Resolution.Daily)
        }

        public override void OnData(Slice data)
        {
        // check if this algorithm is still warming up
        if(!IsWarmingUp)
        	{
	        		// get the current RSI value
	            var rsiValue = _rsi;
	            // get the current average gain of rsi
	            var averageGain = _rsi.AverageGain;
	            // get the current average gain of rsi
	            var averageLoss = _rsi.AverageLoss;
        	}
        }
    }
}
</pre>
</div>

<h3>Indicator Constructor</h3>
<p>
	You can create an indicator object that is not bound to any automatic update and choose which data it should use.
	In this indicator usage, you create it with its constructor where only the indicator characteristics (e.g., period(s), moving average type) is defined.
	If you want to hook up this indicator with a data subscription for automatic updates, you can do it in two ways:
</p>
<h4>1. RegisterIndicator Method</h4>
<p>
	$[RegisterIndicator(), M:QuantConnect.Algorithm.QCAlgorithm.RegisterIndicator] method registers the data for the specified resolution to receive automatic updates as well as configures the indicator to receive updates from the consolidator.
</p>

<div class="section-example-container">
	<pre class="python">
# request the daily equity data
self.AddEquity("SPY", Resolution.Daily)
# define a 10-period RSI indicator with indicator constructor
self.rsi = RelativeStrengthIndex(10, MovingAverageType.Simple)
# register the daily data of "SPY" to automatically update the indicator
self.RegisterIndicator("SPY", self.rsi, Resolution.Daily)
# initialize the indicator with the previous ten daily bars
self.SetWarmUp(10)
</pre>
	<pre class="csharp fsharp">
// request the daily equity data
AddEquity("SPY", Resolution.Daily);
// define a 10-period RSI indicator with indicator constructor
_rsi = new RelativeStrengthIndex(10, MovingAverageType.Simple);
// register the daily data of "SPY" to automatically update the indicator
RegisterIndicator("SPY", _rsi, Resolution.Daily);
// initialize the indicator with the previous ten daily bars
SetWarmUp(10);
</pre>
</div>
<p>
	Other than the available resolutions, you can also update the indicator with the consolidator.
	For details about data consolidator, please see <a class="docs-internal-link" href="/docs/algorithm-reference/consolidating-data">Consolidating Data</a>.
</p>
<div class="section-example-container">
	<pre class="python">
# request the equity data in minute resolution
self.AddEquity("SPY", Resolution.Minute)
# define a 10-period RSI indicator with indicator constructor
self.rsi = RelativeStrengthIndex(10, MovingAverageType.Simple)
# create the 30-minutes data consolidator
thirtyMinuteConsolidator = TradeBarConsolidator(timedelta(minutes=30))
self.SubscriptionManager.AddConsolidator("SPY", thirtyMinuteConsolidator)
# register the 30-minute consolidated bar data to automatically update the indicator
self.RegisterIndicator("SPY", self.rsi, thirtyMinuteConsolidator)
# set a warm-up period to initialize the indicator
# make sure the time period covers the indicator period
self.SetWarmUp(timedelta(days=3))
</pre>
	<pre class="csharp fsharp">
// request the equity data in minute resolution
AddEquity(_symbol, Resolution.Hour);
// define a 10-period RSI indicator with indicator constructor
_rsi = new RelativeStrengthIndex(10, MovingAverageType.Simple);
// create the 30-minutes data consolidator
var thirtyMinuteConsolidator = new TradeBarConsolidator(TimeSpan.FromMinutes(30));
SubscriptionManager.AddConsolidator("SPY", thirtyMinuteConsolidator);
// register the 30-minute consolidated bar data to automatically update the indicator
RegisterIndicator("SPY", _rsi,thirtyMinuteConsolidator);
// set a warm-up period to initialize the indicator
// make sure the time period covers the indicator period
SetWarmUp(TimeSpan.FromDays(3));
</pre>
</div>

<h4>2. Manually Update Method</h4>
<p>
	$[Update(), M:QuantConnect.Indicators.IndicatorBase.Update] method updates the state of indicator with the given value.
	Depending on the different types of indicator, this value can be the time index and decimal value, trade bar or quote bar.
With this method, the indicator will only be ready after it has been updated with enough data.
	For example, a 10-period daily moving average needs to receive ten daily data points through the <code>Update()</code> method.
	You can use historical data to warm up the indicator.
	This updating method grants more flexibility to the indicator. You can use customized values to update the indicator other than the price fields available.
</p>
<div class="section-example-container">
	<pre class="python">
class BasicIndicatorAlgorithm(QCAlgorithm):
    def Initialize(self):
        self.SetStartDate(2013,10, 7)
        self.SetEndDate(2013,10,20)
        self.SetCash(100000)
        self.AddEquity("SPY", Resolution.Daily)
        self.rsi = RelativeStrengthIndex(10, MovingAverageType.Simple)
        # initialize the indicator with the history close price
        history = self.History(["SPY"], 11, Resolution.Daily)
        for time, row in history.loc["SPY"].iterrows():
            self.rsi.Update(time, row["close"])

    def OnData(self, data):
        # update the indicator value with the new input close price every day
        if data.Bars.ContainsKey("SPY"):
            self.rsi.Update(data["SPY"].EndTime, data["SPY"].Close)
        # check if the indicator is ready
        if self.rsi.IsReady:
            # get the current RSI value
            rsi_value = self.rsi.Current.Value
</pre>
	<pre class="csharp fsharp">
namespace QuantConnect.Algorithm.CSharp
{
    public class BasicIndicatorAlgorithm : QCAlgorithm
    {
        private RelativeStrengthIndex _rsi;
        private readonly string _symbol = "SPY";
        public override void Initialize()
        {
        	SetStartDate(2013,10, 7);
        	SetEndDate(2013,10,20);
	        SetCash(100000);
        	AddEquity(_symbol, Resolution.Daily);
					_rsi = new RelativeStrengthIndex(10, MovingAverageType.Simple);
					// initialize the indicator with the daily history close price
          var history = History(_symbol, 11, Resolution.Daily);
					foreach (var bar in history)
            {
                _rsi.Update(bar.EndTime, bar.Close);
            }
        }

        public override void OnData(Slice data)
        {
			    // update the indicator value with the new input close price every day
	        if (data.Bars.ContainsKey(_symbol))
	        	{
	        		_rsi.Update(data[_symbol].EndTime, data[_symbol].Close);
	        	}
	        // check if the indicator is ready
	        if (_rsi.IsReady)
	        	{
	        		// get the current RSI value
		          var rsiValue = _rsi;
		        }
	     }
    }
}
</pre>
</div>

<h3>Updating Indicator with Custom Values</h3>
<p>
	Some indicators, the data point indicators, use only a single price data in their calculations.
  By default, those indicators use the closing price. For equity, that price is the trade bar closing price.
	For other asset classes with quote bar data(bid/ask price), those indicators are calculated with the mid-price of the bid closing price and the ask closing price.
</p>
<p>
	If you want to construct the indicator with the other fields like <code>Open</code>, <code>High</code>, <code>Low</code>, <code>Close</code>,
  You can specify the <code>selector</code> argument in indicator helper method with the available fields.
</p>
<div class="section-example-container">
	<pre class="python">
  # define a 10-period daily RSI indicator with shortcut helper method
  # select the Open price to update the indicator
  self.rsi = self.RSI("SPY", 10,  MovingAverageType.Simple, Resolution.Daily, Field.Open)
</pre>
	<pre class="csharp fsharp">
// define a 10-period daily RSI indicator with shortcut helper method
// select the Open price to update the indicator
_rsi = RSI("SPY", 10,  MovingAverageType.Simple, Resolution.Daily, Field.Open);
</pre>
</div>

<p>
	You can also apply <code>RegisterIndicator</code> to register the price data with the specified field.
</p>
<div class="section-example-container">
	<pre class="python">
# define a 10-period RSI with indicator constructor
self.rsi = RelativeStrengthIndex(10, MovingAverageType.Simple)
# register the daily High price data to automatically update the indicator
self.RegisterIndicator("SPY", self.rsi, Resolution.Daily, Field.High)
</pre>
	<pre class="csharp fsharp">
// define a 10-period RSI with indicator constructor
_rsi = new RelativeStrengthIndex(10, MovingAverageType.Simple);
// register the daily High price data to automatically update the indicator
RegisterIndicator("SPY", _rsi, Resolution.Daily, Field.High);
</pre>
</div>
