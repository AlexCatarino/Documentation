<p>Universes are data types. When you request historical universe data, you get an object that contains a universe data collection for each day. You can iterate through each day in the object and then iterate through the universe data objects of each day.</p>

<p class='csharp'>For example, to get all the US Equity Fundamental universe data for a specific time period, call the <code>UniverseHistory&lt;Fundamentals, Fundamental&gt;</code> method with start and end dates. The resulting object will contain all of the US Equity assets that were available for universe selection between the start and end dates.</p>
<p class='python'>For example, to get all the US Equity Fundamental universe data for a specific time period, call the <code>UniverseHistory</code> method with the <code>Fundamentals</code> type, a start date, and an end date. The resulting object will contain all of the US Equity assets that were available for universe selection between the start and end dates</p>

<div class="section-example-container">
    <pre class="csharp">var qb = new QuantBook();
var universeHistory = qb.UniverseHistory&lt;Fundamentals, Fundamental&gt;(new DateTime(2023, 11, 6), new DateTime(2023, 11, 13));</pre>
    <pre class="python">qb = QuantBook()
universe_history = qb.UniverseHistory(Fundamentals, datetime(2023, 11, 6), datetime(2023, 11, 13))</pre>
</div>

<p>The end date argument is optional. If you omit it, you get all historical data between the start date and the current day.</p>

<p>To narrow down the results and only get historical universe data for assets that pass a specific universe selection filter, pass the filter function to the <code class='csharp'>UniverseHistory&lt;Fundamentals, Fundamental&gt;</code><code class='python'>UniverseHistory</code> method. In this case, the filter function receives a list of <code>Fundamental</code> objects and returns a list of <code>Symbol</code> objects, which represent the universe constituents.</p>

<div class="section-example-container">
    <pre class="csharp">IEnumerable&lt;Symbol&gt; FilterFunction(IEnumerable&lt;Fundamental&gt; fundamentals) 
{
    // Select the 10 Equities that have the lowest PE ratios
    return fundamentals
        .Where(f => f.HasFundamentalData)
        .OrderByDescending(f => f.ValuationRatios.PERatio)
        .Take(10)
        .Select(f => f.Symbol);
}

var universeHistory = qb.UniverseHistory&lt;Fundamentals, Fundamental&gt;(new DateTime(2023, 11, 6), new DateTime(2023, 11, 13), FilterFunction);</pre>
    <pre class="python">def filter_function(fundamentals: List[Fundamental]) -> List[Symbol]:
    # Select the 10 Equities that have the lowest PE ratios
    sorted_by_pe_ratio = sorted(
        [f for f in fundamentals if f.HasFundamentalData], 
        key=lambda fundamental: fundamental.ValuationRatios.PERatio
    )
    return [fundamental.Symbol for fundamental in sorted_by_pe_ratio[:10]]

universe_history = qb.UniverseHistory(Fundamentals, datetime(2023, 11, 6), datetime(2023, 11, 13), filter_function)</pre>
</div>

<p>To see all the <code>Fundamental</code> attributes you can use to define a Fundamental universe, see <a href='/docs/v2/writing-algorithms/datasets/morningstar/us-fundamental-data#05-Data-Point-Attributes'>Data Point Attributes</a>.

<p class='python'>The <code>UniverseHistory</code> method returns a DataFrame where the index is the time when universe selection would occur in a backtest. The DataFrame has one column, named "data". Each row in the data column contains a list of <code>Fundamental</code> objects. The following image shows the first 5 rows of an example DataFrame:</p>
<img class="python docs-image" src="https://cdn.quantconnect.com/i/tu/universe-selection-history-dataframe-python.png" alt="Historical fundamental universe dataframe">
<p class='python'>The access the universe selection data, iterate through the DataFrame.</p>

<p class='csharp'>The <code>UniverseHistory&lt;Fundamentals, Fundamental&gt;</code> method returns an <code>IEnumerable&lt;IEnumerable&lt;Fundamental&gt;&gt;</code> object. To access the data, iterate through the result.</p>

<div class="section-example-container">
    <pre class="python">for date, fundamentals in universe_history.iterrows():
    for fundamental in fundamentals['data']:
        symbol = fundamental.Symbol
        price = fundamental.Price
        if fundamental.HasFundamentalData:
            pe_ratio = fundamental.ValuationRatios.PERatio</pre>
    <pre class="csharp">foreach (var fundamentals in universeHistory)
{
    foreach (var fundamental in fundamentals)
    {
        var symbol = fundamental.Symbol;
        var price = fundamental.Price;
        if (fundamental.HasFundamentalData)
        {
            var peRatio = fundamental.ValuationRatios.PERatio;
        }
    }
}</pre>
</div>
