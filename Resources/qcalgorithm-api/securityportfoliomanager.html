<h4 id="SecurityPortfolioManager">SecurityPortfolioManager</h4>
<div class="code-snippet"><span class="object-type">class</span> <code>QuantConnect.Securities.SecurityPortfolioManager</code><a class="code-source" href="https://github.com/search?q=repo%3AQuantConnect%2FLean+SecurityPortfolioManager&type=code">[source]</a>
</div>
<p>Portfolio manager class groups popular properties and makes them accessible through one interface. It also provide indexing by the vehicle symbol to get the Security.Holding objects.</p>
<div class="subsection-content">
<div class="code-snippet"><code>add_transaction_record(<span class="object-type">time, transaction_profit_loss, is_win</span>)</code></div>
<div class="subsection-content">
<p>Record the transaction value and time in a list to later be processed for statistics creation.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">time</span> (<span class="object-type">datetime</span>)
    </li>
    <li>
    <span class="arg-name">transaction_profit_loss</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">is_win</span> (<span class="object-type">bool</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_dividend(<span class="object-type">dividend, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a dividend to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">dividend</span> (<span class="object-type"><a href="#Dividend">Dividend</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_split(<span class="object-type">split, security, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a split to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">split</span> (<span class="object-type"><a href="#Split">Split</a></span>)
    </li>
    <li>
    <span class="arg-name">security</span> (<span class="object-type"><a href="#Security">Security</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>clear()</code></div>
<div class="subsection-content">
<p>Clear the portfolio of securities objects.</p>


</div>

<div class="code-snippet"><code>contains(<span class="object-type">pair</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">pair</span> (<span class="object-type">Dict[Symbol, SecurityHolding]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>contains_key(<span class="object-type">symbol</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>copy()</code></div>
<div class="subsection-content">
<p>Creates a shallow copy of the <a href="#IExtendedDictionary`2">IExtendedDictionary`2</a>.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>copy_to(<span class="object-type">array, index</span>)</code></div>
<div class="subsection-content">
<p>Copy contents of the portfolio collection to a new destination.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">array</span> (<span class="object-type">Dict`2</span>)
    </li>
    <li>
    <span class="arg-name">index</span> (<span class="object-type">int</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>fromkeys(<span class="object-type">sequence, value</span>)</code></div>
<div class="subsection-content">
<p>Creates a new dictionary from the given sequence of elements.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">sequence</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>get_buying_power(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the margin available for trading a specific symbol in a specific direction. Alias for <a href="#OrderDirection)">OrderDirection)</a></p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>
<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">total_portfolio_value</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">total_portfolio_value</span> (<span class="object-type">float</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>has_sufficient_buying_power_for_order(<span class="object-type">orders</span>)</code></div>
<div class="subsection-content">
<p>Will determine if the algorithms portfolio has enough buying power to fill the given orders</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">orders</span> (<span class="object-type">List[Order]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#HasSufficientBuyingPowerForOrderResult">HasSufficientBuyingPowerForOrderResult</a></p>
</div>

<div class="code-snippet"><code>invalidate_total_portfolio_value()</code></div>
<div class="subsection-content">
<p>Will flag the current <a href="#TotalPortfolioValue">TotalPortfolioValue</a> as invalid so it is recalculated when gotten</p>


</div>

<div class="code-snippet"><code>items()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of dictionary's (Symbol, value) tuple pairs.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>keys()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the Symbol objects in the dictionary</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>log_margin_information(<span class="object-type">order_request=None</span>)</code></div>
<div class="subsection-content">
<p>Logs margin information for debugging</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">order_request</span> (<span class="object-type"><a href="#OrderRequest">OrderRequest</a>, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>pop(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>popitem()</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyTuple</p>
</div>

<div class="code-snippet"><code>process_fills(<span class="object-type">fills</span>)</code></div>
<div class="subsection-content">
<p>Calculate the new average price after processing a list of partial/complete order fill events.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">fills</span> (<span class="object-type">List[OrderEvent]</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_account_currency(<span class="object-type">account_currency, starting_cash=None</span>)</code></div>
<div class="subsection-content">
<p>Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in this currency if given</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">account_currency</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">starting_cash</span> (<span class="object-type">float, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_cash(<span class="object-type">symbol, cash, conversion_rate</span>)</code></div>
<div class="subsection-content">
<p>Set the account currency cash this algorithm is to manage.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">cash</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">conversion_rate</span> (<span class="object-type">float</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">margin_call_model</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">margin_call_model</span> (<span class="object-type">IMarginCallModel</span>)
    </li>
</ul>

</div>
<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">py_object</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">py_object</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_positions(<span class="object-type">position_group_model</span>)</code></div>
<div class="subsection-content">
<p>Will set the security position group model to use</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">position_group_model</span> (<span class="object-type"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>setdefault(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns the value of a Symbol (if the Symbol is in dictionary). If not, it inserts Symbol with a value to the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>try_get_value(<span class="object-type">symbol, holding</span>)</code></div>
<div class="subsection-content">
<p>Attempt to get the value of the securities holding class if this symbol exists.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">holding</span> (<span class="object-type"><a href="#SecurityHolding&">SecurityHolding&</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>update(<span class="object-type">other</span>)</code></div>
<div class="subsection-content">
<p>Updates the dictionary with the elements from the another dictionary object or from an iterable of Symbol/value pairs. The update() method adds element(s) to the dictionary if the Symbol is not in the dictionary.If the Symbol is in the dictionary, it updates the Symbol with the new value.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">other</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>values()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the values in the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">property</span> <code>cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>count</code></div>
<div class="subsection-content">
<p>Count the securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Count the securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">int</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>hold_stock</code></div>
<div class="subsection-content">
<p>Boolean flag indicating we have any holdings in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Boolean flag indicating we have any holdings in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>invested</code></div>
<div class="subsection-content">
<p>Alias for HoldStock. Check if we have any holdings.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Alias for HoldStock. Check if we have any holdings.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>is_read_only</code></div>
<div class="subsection-content">
<p>Check if the underlying securities array is read only.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Check if the underlying securities array is read only.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>item</code></div>
<div class="subsection-content">
<p>Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>keys</code></div>
<div class="subsection-content">
<p>Symbol keys collection of the underlying assets in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Symbol keys collection of the underlying assets in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[Symbol]</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_call_model</code></div>
<div class="subsection-content">
<p>Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IMarginCallModel</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_remaining</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the remaining margin on the account in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>positions</code></div>
<div class="subsection-content">
<p>Local access to the position manager</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the position manager</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_fees</code></div>
<div class="subsection-content">
<p>Total fees paid during the algorithm operation across all securities in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total fees paid during the algorithm operation across all securities in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_holdings_value</code></div>
<div class="subsection-content">
<p>Absolute sum the individual items in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute sum the individual items in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_margin_used</code></div>
<div class="subsection-content">
<p>Gets the total margin used across all securities in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total margin used across all securities in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_net_profit</code></div>
<div class="subsection-content">
<p>Sum of all net profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all net profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value</code></div>
<div class="subsection-content">
<p>Total portfolio value if we sold all holdings at current market rates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total portfolio value if we sold all holdings at current market rates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value_less_free_buffer</code></div>
<div class="subsection-content">
<p>Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_profit</code></div>
<div class="subsection-content">
<p>Sum of all gross profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all gross profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_sale_volume</code></div>
<div class="subsection-content">
<p>Total sale volume since the start of algorithm operations.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total sale volume since the start of algorithm operations.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unlevered_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Absolute value of cash discounted from our total cash by the holdings we own.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute value of cash discounted from our total cash by the holdings we own.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealised_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealized_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>values</code></div>
<div class="subsection-content">
<p>Collection of securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Collection of securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[SecurityHolding]</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">field</span> <code>securities</code></div>
<div class="subsection-content">
<p>Local access to the securities collection for the portfolio summation.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the securities collection for the portfolio summation.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityManager">SecurityManager</a></p>
</div>

<div class="code-snippet"><span class="object-type">field</span> <code>transactions</code></div>
<div class="subsection-content">
<p>Local access to the transactions collection for the portfolio summation and updates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the transactions collection for the portfolio summation and updates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityTransactionManager">SecurityTransactionManager</a></p>
</div>

</div>
<h4 id="SecurityPortfolioManager">SecurityPortfolioManager</h4>
<div class="code-snippet"><span class="object-type">class</span> <code>QuantConnect.Securities.SecurityPortfolioManager</code><a class="code-source" href="https://github.com/search?q=repo%3AQuantConnect%2FLean+SecurityPortfolioManager&type=code">[source]</a>
</div>
<p>Portfolio manager class groups popular properties and makes them accessible through one interface. It also provide indexing by the vehicle symbol to get the Security.Holding objects.</p>
<div class="subsection-content">
<div class="code-snippet"><code>add_transaction_record(<span class="object-type">time, transaction_profit_loss, is_win</span>)</code></div>
<div class="subsection-content">
<p>Record the transaction value and time in a list to later be processed for statistics creation.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">time</span> (<span class="object-type">datetime</span>)
    </li>
    <li>
    <span class="arg-name">transaction_profit_loss</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">is_win</span> (<span class="object-type">bool</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_dividend(<span class="object-type">dividend, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a dividend to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">dividend</span> (<span class="object-type"><a href="#Dividend">Dividend</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_split(<span class="object-type">split, security, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a split to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">split</span> (<span class="object-type"><a href="#Split">Split</a></span>)
    </li>
    <li>
    <span class="arg-name">security</span> (<span class="object-type"><a href="#Security">Security</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>clear()</code></div>
<div class="subsection-content">
<p>Clear the portfolio of securities objects.</p>


</div>

<div class="code-snippet"><code>contains(<span class="object-type">pair</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">pair</span> (<span class="object-type">Dict[Symbol, SecurityHolding]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>contains_key(<span class="object-type">symbol</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>copy()</code></div>
<div class="subsection-content">
<p>Creates a shallow copy of the <a href="#IExtendedDictionary`2">IExtendedDictionary`2</a>.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>copy_to(<span class="object-type">array, index</span>)</code></div>
<div class="subsection-content">
<p>Copy contents of the portfolio collection to a new destination.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">array</span> (<span class="object-type">Dict`2</span>)
    </li>
    <li>
    <span class="arg-name">index</span> (<span class="object-type">int</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>fromkeys(<span class="object-type">sequence, value</span>)</code></div>
<div class="subsection-content">
<p>Creates a new dictionary from the given sequence of elements.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">sequence</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>get_buying_power(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the margin available for trading a specific symbol in a specific direction. Alias for <a href="#OrderDirection)">OrderDirection)</a></p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>
<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">total_portfolio_value</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">total_portfolio_value</span> (<span class="object-type">float</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>has_sufficient_buying_power_for_order(<span class="object-type">orders</span>)</code></div>
<div class="subsection-content">
<p>Will determine if the algorithms portfolio has enough buying power to fill the given orders</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">orders</span> (<span class="object-type">List[Order]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">HasSufficientBuyingPowerForOrderResult</p>
</div>

<div class="code-snippet"><code>invalidate_total_portfolio_value()</code></div>
<div class="subsection-content">
<p>Will flag the current <a href="#TotalPortfolioValue">TotalPortfolioValue</a> as invalid so it is recalculated when gotten</p>


</div>

<div class="code-snippet"><code>items()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of dictionary's (Symbol, value) tuple pairs.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>keys()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the Symbol objects in the dictionary</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>log_margin_information(<span class="object-type">order_request=None</span>)</code></div>
<div class="subsection-content">
<p>Logs margin information for debugging</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">order_request</span> (<span class="object-type"><a href="#OrderRequest">OrderRequest</a>, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>pop(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>popitem()</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyTuple</p>
</div>

<div class="code-snippet"><code>process_fills(<span class="object-type">fills</span>)</code></div>
<div class="subsection-content">
<p>Calculate the new average price after processing a list of partial/complete order fill events.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">fills</span> (<span class="object-type">List[OrderEvent]</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_account_currency(<span class="object-type">account_currency, starting_cash=None</span>)</code></div>
<div class="subsection-content">
<p>Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in this currency if given</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">account_currency</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">starting_cash</span> (<span class="object-type">float, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_cash(<span class="object-type">symbol, cash, conversion_rate</span>)</code></div>
<div class="subsection-content">
<p>Set the account currency cash this algorithm is to manage.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">cash</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">conversion_rate</span> (<span class="object-type">float</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">margin_call_model</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">margin_call_model</span> (<span class="object-type">IMarginCallModel</span>)
    </li>
</ul>

</div>
<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">py_object</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">py_object</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_positions(<span class="object-type">position_group_model</span>)</code></div>
<div class="subsection-content">
<p>Will set the security position group model to use</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">position_group_model</span> (<span class="object-type"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>setdefault(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns the value of a Symbol (if the Symbol is in dictionary). If not, it inserts Symbol with a value to the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>try_get_value(<span class="object-type">symbol, holding</span>)</code></div>
<div class="subsection-content">
<p>Attempt to get the value of the securities holding class if this symbol exists.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">holding</span> (<span class="object-type"><a href="#SecurityHolding&">SecurityHolding&</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>update(<span class="object-type">other</span>)</code></div>
<div class="subsection-content">
<p>Updates the dictionary with the elements from the another dictionary object or from an iterable of Symbol/value pairs. The update() method adds element(s) to the dictionary if the Symbol is not in the dictionary.If the Symbol is in the dictionary, it updates the Symbol with the new value.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">other</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>values()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the values in the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">property</span> <code>cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>count</code></div>
<div class="subsection-content">
<p>Count the securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Count the securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">int</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>hold_stock</code></div>
<div class="subsection-content">
<p>Boolean flag indicating we have any holdings in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Boolean flag indicating we have any holdings in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>invested</code></div>
<div class="subsection-content">
<p>Alias for HoldStock. Check if we have any holdings.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Alias for HoldStock. Check if we have any holdings.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>is_read_only</code></div>
<div class="subsection-content">
<p>Check if the underlying securities array is read only.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Check if the underlying securities array is read only.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>item</code></div>
<div class="subsection-content">
<p>Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>keys</code></div>
<div class="subsection-content">
<p>Symbol keys collection of the underlying assets in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Symbol keys collection of the underlying assets in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[Symbol]</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_call_model</code></div>
<div class="subsection-content">
<p>Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IMarginCallModel</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_remaining</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the remaining margin on the account in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>positions</code></div>
<div class="subsection-content">
<p>Local access to the position manager</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the position manager</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">SecurityPositionGroupModel</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_fees</code></div>
<div class="subsection-content">
<p>Total fees paid during the algorithm operation across all securities in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total fees paid during the algorithm operation across all securities in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_holdings_value</code></div>
<div class="subsection-content">
<p>Absolute sum the individual items in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute sum the individual items in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_margin_used</code></div>
<div class="subsection-content">
<p>Gets the total margin used across all securities in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total margin used across all securities in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_net_profit</code></div>
<div class="subsection-content">
<p>Sum of all net profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all net profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value</code></div>
<div class="subsection-content">
<p>Total portfolio value if we sold all holdings at current market rates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total portfolio value if we sold all holdings at current market rates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value_less_free_buffer</code></div>
<div class="subsection-content">
<p>Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_profit</code></div>
<div class="subsection-content">
<p>Sum of all gross profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all gross profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_sale_volume</code></div>
<div class="subsection-content">
<p>Total sale volume since the start of algorithm operations.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total sale volume since the start of algorithm operations.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unlevered_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Absolute value of cash discounted from our total cash by the holdings we own.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute value of cash discounted from our total cash by the holdings we own.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealised_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealized_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>values</code></div>
<div class="subsection-content">
<p>Collection of securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Collection of securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[SecurityHolding]</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">field</span> <code>securities</code></div>
<div class="subsection-content">
<p>Local access to the securities collection for the portfolio summation.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the securities collection for the portfolio summation.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityManager">SecurityManager</a></p>
</div>

<div class="code-snippet"><span class="object-type">field</span> <code>transactions</code></div>
<div class="subsection-content">
<p>Local access to the transactions collection for the portfolio summation and updates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the transactions collection for the portfolio summation and updates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityTransactionManager">SecurityTransactionManager</a></p>
</div>

</div>
<h4 id="SecurityPortfolioManager">SecurityPortfolioManager</h4>
<div class="code-snippet"><span class="object-type">class</span> <code>QuantConnect.Securities.SecurityPortfolioManager</code><a class="code-source" href="https://github.com/search?q=repo%3AQuantConnect%2FLean+SecurityPortfolioManager&type=code">[source]</a>
</div>
<p>Portfolio manager class groups popular properties and makes them accessible through one interface. It also provide indexing by the vehicle symbol to get the Security.Holding objects.</p>
<div class="subsection-content">
<div class="code-snippet"><code>add_transaction_record(<span class="object-type">time, transaction_profit_loss, is_win</span>)</code></div>
<div class="subsection-content">
<p>Record the transaction value and time in a list to later be processed for statistics creation.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">time</span> (<span class="object-type">datetime</span>)
    </li>
    <li>
    <span class="arg-name">transaction_profit_loss</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">is_win</span> (<span class="object-type">bool</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_dividend(<span class="object-type">dividend, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a dividend to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">dividend</span> (<span class="object-type"><a href="#Dividend">Dividend</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_split(<span class="object-type">split, security, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a split to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">split</span> (<span class="object-type"><a href="#Split">Split</a></span>)
    </li>
    <li>
    <span class="arg-name">security</span> (<span class="object-type"><a href="#Security">Security</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>clear()</code></div>
<div class="subsection-content">
<p>Clear the portfolio of securities objects.</p>


</div>

<div class="code-snippet"><code>contains(<span class="object-type">pair</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">pair</span> (<span class="object-type">Dict[Symbol, SecurityHolding]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>contains_key(<span class="object-type">symbol</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>copy()</code></div>
<div class="subsection-content">
<p>Creates a shallow copy of the <a href="#IExtendedDictionary`2">IExtendedDictionary`2</a>.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>copy_to(<span class="object-type">array, index</span>)</code></div>
<div class="subsection-content">
<p>Copy contents of the portfolio collection to a new destination.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">array</span> (<span class="object-type">Dict`2</span>)
    </li>
    <li>
    <span class="arg-name">index</span> (<span class="object-type">int</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>fromkeys(<span class="object-type">sequence, value</span>)</code></div>
<div class="subsection-content">
<p>Creates a new dictionary from the given sequence of elements.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">sequence</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>get_buying_power(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the margin available for trading a specific symbol in a specific direction. Alias for <a href="#OrderDirection)">OrderDirection)</a></p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>
<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">total_portfolio_value</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">total_portfolio_value</span> (<span class="object-type">float</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>has_sufficient_buying_power_for_order(<span class="object-type">orders</span>)</code></div>
<div class="subsection-content">
<p>Will determine if the algorithms portfolio has enough buying power to fill the given orders</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">orders</span> (<span class="object-type">List[Order]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#HasSufficientBuyingPowerForOrderResult">HasSufficientBuyingPowerForOrderResult</a></p>
</div>

<div class="code-snippet"><code>invalidate_total_portfolio_value()</code></div>
<div class="subsection-content">
<p>Will flag the current <a href="#TotalPortfolioValue">TotalPortfolioValue</a> as invalid so it is recalculated when gotten</p>


</div>

<div class="code-snippet"><code>items()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of dictionary's (Symbol, value) tuple pairs.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>keys()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the Symbol objects in the dictionary</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>log_margin_information(<span class="object-type">order_request=None</span>)</code></div>
<div class="subsection-content">
<p>Logs margin information for debugging</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">order_request</span> (<span class="object-type"><a href="#OrderRequest">OrderRequest</a>, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>pop(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>popitem()</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyTuple</p>
</div>

<div class="code-snippet"><code>process_fills(<span class="object-type">fills</span>)</code></div>
<div class="subsection-content">
<p>Calculate the new average price after processing a list of partial/complete order fill events.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">fills</span> (<span class="object-type">List[OrderEvent]</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_account_currency(<span class="object-type">account_currency, starting_cash=None</span>)</code></div>
<div class="subsection-content">
<p>Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in this currency if given</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">account_currency</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">starting_cash</span> (<span class="object-type">float, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_cash(<span class="object-type">symbol, cash, conversion_rate</span>)</code></div>
<div class="subsection-content">
<p>Set the account currency cash this algorithm is to manage.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">cash</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">conversion_rate</span> (<span class="object-type">float</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">margin_call_model</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">margin_call_model</span> (<span class="object-type">IMarginCallModel</span>)
    </li>
</ul>

</div>
<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">py_object</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">py_object</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_positions(<span class="object-type">position_group_model</span>)</code></div>
<div class="subsection-content">
<p>Will set the security position group model to use</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">position_group_model</span> (<span class="object-type"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>setdefault(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns the value of a Symbol (if the Symbol is in dictionary). If not, it inserts Symbol with a value to the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>try_get_value(<span class="object-type">symbol, holding</span>)</code></div>
<div class="subsection-content">
<p>Attempt to get the value of the securities holding class if this symbol exists.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">holding</span> (<span class="object-type"><a href="#SecurityHolding&">SecurityHolding&</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>update(<span class="object-type">other</span>)</code></div>
<div class="subsection-content">
<p>Updates the dictionary with the elements from the another dictionary object or from an iterable of Symbol/value pairs. The update() method adds element(s) to the dictionary if the Symbol is not in the dictionary.If the Symbol is in the dictionary, it updates the Symbol with the new value.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">other</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>values()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the values in the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">property</span> <code>cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>count</code></div>
<div class="subsection-content">
<p>Count the securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Count the securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">int</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>hold_stock</code></div>
<div class="subsection-content">
<p>Boolean flag indicating we have any holdings in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Boolean flag indicating we have any holdings in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>invested</code></div>
<div class="subsection-content">
<p>Alias for HoldStock. Check if we have any holdings.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Alias for HoldStock. Check if we have any holdings.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>is_read_only</code></div>
<div class="subsection-content">
<p>Check if the underlying securities array is read only.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Check if the underlying securities array is read only.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>item</code></div>
<div class="subsection-content">
<p>Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>keys</code></div>
<div class="subsection-content">
<p>Symbol keys collection of the underlying assets in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Symbol keys collection of the underlying assets in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[Symbol]</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_call_model</code></div>
<div class="subsection-content">
<p>Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IMarginCallModel</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_remaining</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the remaining margin on the account in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>positions</code></div>
<div class="subsection-content">
<p>Local access to the position manager</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the position manager</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_fees</code></div>
<div class="subsection-content">
<p>Total fees paid during the algorithm operation across all securities in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total fees paid during the algorithm operation across all securities in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_holdings_value</code></div>
<div class="subsection-content">
<p>Absolute sum the individual items in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute sum the individual items in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_margin_used</code></div>
<div class="subsection-content">
<p>Gets the total margin used across all securities in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total margin used across all securities in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_net_profit</code></div>
<div class="subsection-content">
<p>Sum of all net profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all net profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value</code></div>
<div class="subsection-content">
<p>Total portfolio value if we sold all holdings at current market rates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total portfolio value if we sold all holdings at current market rates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value_less_free_buffer</code></div>
<div class="subsection-content">
<p>Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_profit</code></div>
<div class="subsection-content">
<p>Sum of all gross profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all gross profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_sale_volume</code></div>
<div class="subsection-content">
<p>Total sale volume since the start of algorithm operations.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total sale volume since the start of algorithm operations.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unlevered_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Absolute value of cash discounted from our total cash by the holdings we own.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute value of cash discounted from our total cash by the holdings we own.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealised_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealized_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>values</code></div>
<div class="subsection-content">
<p>Collection of securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Collection of securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[SecurityHolding]</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">field</span> <code>securities</code></div>
<div class="subsection-content">
<p>Local access to the securities collection for the portfolio summation.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the securities collection for the portfolio summation.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityManager">SecurityManager</a></p>
</div>

<div class="code-snippet"><span class="object-type">field</span> <code>transactions</code></div>
<div class="subsection-content">
<p>Local access to the transactions collection for the portfolio summation and updates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the transactions collection for the portfolio summation and updates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityTransactionManager">SecurityTransactionManager</a></p>
</div>

</div>
<h4 id="SecurityPortfolioManager">SecurityPortfolioManager</h4>
<div class="code-snippet"><span class="object-type">class</span> <code>QuantConnect.Securities.SecurityPortfolioManager</code><a class="code-source" href="https://github.com/search?q=repo%3AQuantConnect%2FLean+SecurityPortfolioManager&type=code">[source]</a>
</div>
<p>Portfolio manager class groups popular properties and makes them accessible through one interface. It also provide indexing by the vehicle symbol to get the Security.Holding objects.</p>
<div class="subsection-content">
<div class="code-snippet"><code>add_transaction_record(<span class="object-type">time, transaction_profit_loss, is_win</span>)</code></div>
<div class="subsection-content">
<p>Record the transaction value and time in a list to later be processed for statistics creation.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">time</span> (<span class="object-type">datetime</span>)
    </li>
    <li>
    <span class="arg-name">transaction_profit_loss</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">is_win</span> (<span class="object-type">bool</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_dividend(<span class="object-type">dividend, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a dividend to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">dividend</span> (<span class="object-type"><a href="#Dividend">Dividend</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_split(<span class="object-type">split, security, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a split to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">split</span> (<span class="object-type"><a href="#Split">Split</a></span>)
    </li>
    <li>
    <span class="arg-name">security</span> (<span class="object-type"><a href="#Security">Security</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>clear()</code></div>
<div class="subsection-content">
<p>Clear the portfolio of securities objects.</p>


</div>

<div class="code-snippet"><code>contains(<span class="object-type">pair</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">pair</span> (<span class="object-type">Dict[Symbol, SecurityHolding]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>contains_key(<span class="object-type">symbol</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>copy()</code></div>
<div class="subsection-content">
<p>Creates a shallow copy of the <a href="#IExtendedDictionary`2">IExtendedDictionary`2</a>.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>copy_to(<span class="object-type">array, index</span>)</code></div>
<div class="subsection-content">
<p>Copy contents of the portfolio collection to a new destination.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">array</span> (<span class="object-type">Dict`2</span>)
    </li>
    <li>
    <span class="arg-name">index</span> (<span class="object-type">int</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>fromkeys(<span class="object-type">sequence, value</span>)</code></div>
<div class="subsection-content">
<p>Creates a new dictionary from the given sequence of elements.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">sequence</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>get_buying_power(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the margin available for trading a specific symbol in a specific direction. Alias for <a href="#OrderDirection)">OrderDirection)</a></p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>
<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">total_portfolio_value</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">total_portfolio_value</span> (<span class="object-type">float</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>has_sufficient_buying_power_for_order(<span class="object-type">orders</span>)</code></div>
<div class="subsection-content">
<p>Will determine if the algorithms portfolio has enough buying power to fill the given orders</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">orders</span> (<span class="object-type">List[Order]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#HasSufficientBuyingPowerForOrderResult">HasSufficientBuyingPowerForOrderResult</a></p>
</div>

<div class="code-snippet"><code>invalidate_total_portfolio_value()</code></div>
<div class="subsection-content">
<p>Will flag the current <a href="#TotalPortfolioValue">TotalPortfolioValue</a> as invalid so it is recalculated when gotten</p>


</div>

<div class="code-snippet"><code>items()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of dictionary's (Symbol, value) tuple pairs.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>keys()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the Symbol objects in the dictionary</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>log_margin_information(<span class="object-type">order_request=None</span>)</code></div>
<div class="subsection-content">
<p>Logs margin information for debugging</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">order_request</span> (<span class="object-type"><a href="#OrderRequest">OrderRequest</a>, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>pop(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>popitem()</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyTuple</p>
</div>

<div class="code-snippet"><code>process_fills(<span class="object-type">fills</span>)</code></div>
<div class="subsection-content">
<p>Calculate the new average price after processing a list of partial/complete order fill events.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">fills</span> (<span class="object-type">List[OrderEvent]</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_account_currency(<span class="object-type">account_currency, starting_cash=None</span>)</code></div>
<div class="subsection-content">
<p>Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in this currency if given</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">account_currency</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">starting_cash</span> (<span class="object-type">float, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_cash(<span class="object-type">symbol, cash, conversion_rate</span>)</code></div>
<div class="subsection-content">
<p>Set the account currency cash this algorithm is to manage.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">cash</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">conversion_rate</span> (<span class="object-type">float</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">margin_call_model</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">margin_call_model</span> (<span class="object-type">IMarginCallModel</span>)
    </li>
</ul>

</div>
<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">py_object</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">py_object</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_positions(<span class="object-type">position_group_model</span>)</code></div>
<div class="subsection-content">
<p>Will set the security position group model to use</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">position_group_model</span> (<span class="object-type"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>setdefault(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns the value of a Symbol (if the Symbol is in dictionary). If not, it inserts Symbol with a value to the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>try_get_value(<span class="object-type">symbol, holding</span>)</code></div>
<div class="subsection-content">
<p>Attempt to get the value of the securities holding class if this symbol exists.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">holding</span> (<span class="object-type"><a href="#SecurityHolding&">SecurityHolding&</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>update(<span class="object-type">other</span>)</code></div>
<div class="subsection-content">
<p>Updates the dictionary with the elements from the another dictionary object or from an iterable of Symbol/value pairs. The update() method adds element(s) to the dictionary if the Symbol is not in the dictionary.If the Symbol is in the dictionary, it updates the Symbol with the new value.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">other</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>values()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the values in the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">property</span> <code>cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>count</code></div>
<div class="subsection-content">
<p>Count the securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Count the securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">int</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>hold_stock</code></div>
<div class="subsection-content">
<p>Boolean flag indicating we have any holdings in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Boolean flag indicating we have any holdings in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>invested</code></div>
<div class="subsection-content">
<p>Alias for HoldStock. Check if we have any holdings.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Alias for HoldStock. Check if we have any holdings.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>is_read_only</code></div>
<div class="subsection-content">
<p>Check if the underlying securities array is read only.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Check if the underlying securities array is read only.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>item</code></div>
<div class="subsection-content">
<p>Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>keys</code></div>
<div class="subsection-content">
<p>Symbol keys collection of the underlying assets in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Symbol keys collection of the underlying assets in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[Symbol]</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_call_model</code></div>
<div class="subsection-content">
<p>Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IMarginCallModel</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_remaining</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the remaining margin on the account in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>positions</code></div>
<div class="subsection-content">
<p>Local access to the position manager</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the position manager</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_fees</code></div>
<div class="subsection-content">
<p>Total fees paid during the algorithm operation across all securities in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total fees paid during the algorithm operation across all securities in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_holdings_value</code></div>
<div class="subsection-content">
<p>Absolute sum the individual items in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute sum the individual items in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_margin_used</code></div>
<div class="subsection-content">
<p>Gets the total margin used across all securities in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total margin used across all securities in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_net_profit</code></div>
<div class="subsection-content">
<p>Sum of all net profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all net profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value</code></div>
<div class="subsection-content">
<p>Total portfolio value if we sold all holdings at current market rates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total portfolio value if we sold all holdings at current market rates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value_less_free_buffer</code></div>
<div class="subsection-content">
<p>Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_profit</code></div>
<div class="subsection-content">
<p>Sum of all gross profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all gross profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_sale_volume</code></div>
<div class="subsection-content">
<p>Total sale volume since the start of algorithm operations.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total sale volume since the start of algorithm operations.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unlevered_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Absolute value of cash discounted from our total cash by the holdings we own.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute value of cash discounted from our total cash by the holdings we own.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealised_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealized_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>values</code></div>
<div class="subsection-content">
<p>Collection of securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Collection of securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[SecurityHolding]</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">field</span> <code>securities</code></div>
<div class="subsection-content">
<p>Local access to the securities collection for the portfolio summation.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the securities collection for the portfolio summation.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityManager">SecurityManager</a></p>
</div>

<div class="code-snippet"><span class="object-type">field</span> <code>transactions</code></div>
<div class="subsection-content">
<p>Local access to the transactions collection for the portfolio summation and updates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the transactions collection for the portfolio summation and updates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityTransactionManager">SecurityTransactionManager</a></p>
</div>

</div>
<h4 id="SecurityPortfolioManager">SecurityPortfolioManager</h4>
<div class="code-snippet"><span class="object-type">class</span> <code>QuantConnect.Securities.SecurityPortfolioManager</code><a class="code-source" href="https://github.com/search?q=repo%3AQuantConnect%2FLean+SecurityPortfolioManager&type=code">[source]</a>
</div>
<p>Portfolio manager class groups popular properties and makes them accessible through one interface. It also provide indexing by the vehicle symbol to get the Security.Holding objects.</p>
<div class="subsection-content">
<div class="code-snippet"><code>add_transaction_record(<span class="object-type">time, transaction_profit_loss, is_win</span>)</code></div>
<div class="subsection-content">
<p>Record the transaction value and time in a list to later be processed for statistics creation.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">time</span> (<span class="object-type">datetime</span>)
    </li>
    <li>
    <span class="arg-name">transaction_profit_loss</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">is_win</span> (<span class="object-type">bool</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_dividend(<span class="object-type">dividend, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a dividend to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">dividend</span> (<span class="object-type"><a href="#Dividend">Dividend</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>apply_split(<span class="object-type">split, security, live_mode, mode</span>)</code></div>
<div class="subsection-content">
<p>Applies a split to the portfolio</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">split</span> (<span class="object-type"><a href="#Split">Split</a></span>)
    </li>
    <li>
    <span class="arg-name">security</span> (<span class="object-type"><a href="#Security">Security</a></span>)
    </li>
    <li>
    <span class="arg-name">live_mode</span> (<span class="object-type">bool</span>)
    </li>
    <li>
    <span class="arg-name">mode</span> (<span class="object-type"><a href="#DataNormalizationMode">DataNormalizationMode</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>clear()</code></div>
<div class="subsection-content">
<p>Clear the portfolio of securities objects.</p>


</div>

<div class="code-snippet"><code>contains(<span class="object-type">pair</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">pair</span> (<span class="object-type">Dict[Symbol, SecurityHolding]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>contains_key(<span class="object-type">symbol</span>)</code></div>
<div class="subsection-content">
<p>Check if the portfolio contains this symbol string.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>copy()</code></div>
<div class="subsection-content">
<p>Creates a shallow copy of the <a href="#IExtendedDictionary`2">IExtendedDictionary`2</a>.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>copy_to(<span class="object-type">array, index</span>)</code></div>
<div class="subsection-content">
<p>Copy contents of the portfolio collection to a new destination.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">array</span> (<span class="object-type">Dict`2</span>)
    </li>
    <li>
    <span class="arg-name">index</span> (<span class="object-type">int</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>fromkeys(<span class="object-type">sequence, value</span>)</code></div>
<div class="subsection-content">
<p>Creates a new dictionary from the given sequence of elements.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">sequence</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyDict</p>
</div>

<div class="code-snippet"><code>get_buying_power(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the margin available for trading a specific symbol in a specific direction. Alias for <a href="#OrderDirection)">OrderDirection)</a></p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">symbol, direction=0</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">direction</span> (<span class="object-type"><a href="#OrderDirection">OrderDirection</a>, optional</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>
<div class="code-snippet"><code>get_margin_remaining(<span class="object-type">total_portfolio_value</span>)</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency for the given total portfolio value</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">total_portfolio_value</span> (<span class="object-type">float</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>has_sufficient_buying_power_for_order(<span class="object-type">orders</span>)</code></div>
<div class="subsection-content">
<p>Will determine if the algorithms portfolio has enough buying power to fill the given orders</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">orders</span> (<span class="object-type">List[Order]</span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#HasSufficientBuyingPowerForOrderResult">HasSufficientBuyingPowerForOrderResult</a></p>
</div>

<div class="code-snippet"><code>invalidate_total_portfolio_value()</code></div>
<div class="subsection-content">
<p>Will flag the current <a href="#TotalPortfolioValue">TotalPortfolioValue</a> as invalid so it is recalculated when gotten</p>


</div>

<div class="code-snippet"><code>items()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of dictionary's (Symbol, value) tuple pairs.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>keys()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the Symbol objects in the dictionary</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

<div class="code-snippet"><code>log_margin_information(<span class="object-type">order_request=None</span>)</code></div>
<div class="subsection-content">
<p>Logs margin information for debugging</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">order_request</span> (<span class="object-type"><a href="#OrderRequest">OrderRequest</a>, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>pop(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>popitem()</code></div>
<div class="subsection-content">
<p>Returns and removes an arbitrary element (Symbol, value) pair from the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyTuple</p>
</div>

<div class="code-snippet"><code>process_fills(<span class="object-type">fills</span>)</code></div>
<div class="subsection-content">
<p>Calculate the new average price after processing a list of partial/complete order fill events.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">fills</span> (<span class="object-type">List[OrderEvent]</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_account_currency(<span class="object-type">account_currency, starting_cash=None</span>)</code></div>
<div class="subsection-content">
<p>Sets the account currency cash symbol this algorithm is to manage, as well as the starting cash in this currency if given</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">account_currency</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">starting_cash</span> (<span class="object-type">float, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_cash(<span class="object-type">symbol, cash, conversion_rate</span>)</code></div>
<div class="subsection-content">
<p>Set the account currency cash this algorithm is to manage.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type">str</span>)
    </li>
    <li>
    <span class="arg-name">cash</span> (<span class="object-type">float</span>)
    </li>
    <li>
    <span class="arg-name">conversion_rate</span> (<span class="object-type">float</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">margin_call_model</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">margin_call_model</span> (<span class="object-type">IMarginCallModel</span>)
    </li>
</ul>

</div>
<div class="code-snippet"><code>set_margin_call_model(<span class="object-type">py_object</span>)</code></div>
<div class="subsection-content">
<p>Sets the margin call model</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">py_object</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_positions(<span class="object-type">position_group_model</span>)</code></div>
<div class="subsection-content">
<p>Will set the security position group model to use</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">position_group_model</span> (<span class="object-type"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>setdefault(<span class="object-type">symbol, default_value</span>)</code></div>
<div class="subsection-content">
<p>Returns the value of a Symbol (if the Symbol is in dictionary). If not, it inserts Symbol with a value to the dictionary.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">default_value</span> (<span class="object-type"><a href="#SecurityHolding">SecurityHolding</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><code>try_get_value(<span class="object-type">symbol, holding</span>)</code></div>
<div class="subsection-content">
<p>Attempt to get the value of the securities holding class if this symbol exists.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
    <li>
    <span class="arg-name">holding</span> (<span class="object-type"><a href="#SecurityHolding&">SecurityHolding&</a></span>)
    </li>
</ul>

<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>update(<span class="object-type">other</span>)</code></div>
<div class="subsection-content">
<p>Updates the dictionary with the elements from the another dictionary object or from an iterable of Symbol/value pairs. The update() method adds element(s) to the dictionary if the Symbol is not in the dictionary.If the Symbol is in the dictionary, it updates the Symbol with the new value.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">other</span> (<span class="object-type">PyObject</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>values()</code></div>
<div class="subsection-content">
<p>Returns a view object that displays a list of all the values in the dictionary.</p>


<div class="subsection-header">Return type:</div>
<p class="subsection-content">PyList</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">property</span> <code>cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only settled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only settled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>count</code></div>
<div class="subsection-content">
<p>Count the securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Count the securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">int</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>hold_stock</code></div>
<div class="subsection-content">
<p>Boolean flag indicating we have any holdings in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Boolean flag indicating we have any holdings in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>invested</code></div>
<div class="subsection-content">
<p>Alias for HoldStock. Check if we have any holdings.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Alias for HoldStock. Check if we have any holdings.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>is_read_only</code></div>
<div class="subsection-content">
<p>Check if the underlying securities array is read only.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Check if the underlying securities array is read only.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>item</code></div>
<div class="subsection-content">
<p>Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Indexer for the PortfolioManager class to access the underlying security holdings objects.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityHolding">SecurityHolding</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>keys</code></div>
<div class="subsection-content">
<p>Symbol keys collection of the underlying assets in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Symbol keys collection of the underlying assets in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[Symbol]</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_call_model</code></div>
<div class="subsection-content">
<p>Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets or sets the <a href="#MarginCallModel">MarginCallModel</a> for the portfolio. This is used to executed margin call orders.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IMarginCallModel</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>margin_remaining</code></div>
<div class="subsection-content">
<p>Gets the remaining margin on the account in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the remaining margin on the account in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>positions</code></div>
<div class="subsection-content">
<p>Local access to the position manager</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the position manager</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityPositionGroupModel">SecurityPositionGroupModel</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total absolute holdings cost of the portfolio. This sums up the individual absolute cost of each holding</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_fees</code></div>
<div class="subsection-content">
<p>Total fees paid during the algorithm operation across all securities in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total fees paid during the algorithm operation across all securities in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_holdings_value</code></div>
<div class="subsection-content">
<p>Absolute sum the individual items in portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute sum the individual items in portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_margin_used</code></div>
<div class="subsection-content">
<p>Gets the total margin used across all securities in the account's currency</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the total margin used across all securities in the account's currency</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_net_profit</code></div>
<div class="subsection-content">
<p>Sum of all net profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all net profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value</code></div>
<div class="subsection-content">
<p>Total portfolio value if we sold all holdings at current market rates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total portfolio value if we sold all holdings at current market rates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_portfolio_value_less_free_buffer</code></div>
<div class="subsection-content">
<p>Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Returns the adjusted total portfolio value removing the free amount If the <a href="#FreePortfolioValue">FreePortfolioValue</a> has not been set, the free amount will have a trailing behavior and be updated when requested</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_profit</code></div>
<div class="subsection-content">
<p>Sum of all gross profit across all securities in portfolio and dividend payments.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all gross profit across all securities in portfolio and dividend payments.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_sale_volume</code></div>
<div class="subsection-content">
<p>Total sale volume since the start of algorithm operations.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Total sale volume since the start of algorithm operations.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unlevered_absolute_holdings_cost</code></div>
<div class="subsection-content">
<p>Absolute value of cash discounted from our total cash by the holdings we own.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Absolute value of cash discounted from our total cash by the holdings we own.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealised_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>total_unrealized_profit</code></div>
<div class="subsection-content">
<p>Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Get the total unrealised profit in our portfolio from the individual security unrealized profits.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash</code></div>
<div class="subsection-content">
<p>Sum of all currencies in account in US dollars (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sum of all currencies in account in US dollars (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>unsettled_cash_book</code></div>
<div class="subsection-content">
<p>Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the cash book that keeps track of all currency holdings (only unsettled cash)</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#CashBook">CashBook</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>values</code></div>
<div class="subsection-content">
<p>Collection of securities objects in the portfolio.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Collection of securities objects in the portfolio.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[SecurityHolding]</p>
</div>

</div>
<div class="subsection-content">
<div class="code-snippet"><span class="object-type">field</span> <code>securities</code></div>
<div class="subsection-content">
<p>Local access to the securities collection for the portfolio summation.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the securities collection for the portfolio summation.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityManager">SecurityManager</a></p>
</div>

<div class="code-snippet"><span class="object-type">field</span> <code>transactions</code></div>
<div class="subsection-content">
<p>Local access to the transactions collection for the portfolio summation and updates.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Local access to the transactions collection for the portfolio summation and updates.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#SecurityTransactionManager">SecurityTransactionManager</a></p>
</div>

</div>
