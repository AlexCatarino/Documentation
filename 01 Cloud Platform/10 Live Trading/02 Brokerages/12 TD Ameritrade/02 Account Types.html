<p>TD Ameritrade supports cash and margin accounts. To set the account type in an algorithm, see the <a href="/docs/v2/writing-algorithms/reality-modeling/brokerages/supported-models/td-ameritrade">TD Ameritrade brokerage model documentation</a>.</p>

<h4>Create an Account</h4>

<p>Follow the <a rel="nofollow" target="_blank" href="https://start.tdameritrade.com">account creation wizard</a> on the TD Ameritrade website to create a TD Ameritrade account.</p>

<p>You will need API credentials to deploy live algorithms with your brokerage account. You cannot create new API credentials due to the <a rel="nofollow" target="_blank" href="https://developer.tdameritrade.com/content/trader-api-schwab-integration-guide">Trader API Schwab Integration</a>.</p>

<p>If you have the API key, follow these steps to retrieve the access token:</p>
<ul>
   <li> Use the API key to create the link to generate the access token request:<br> https://auth.tdameritrade.com/oauth?client_id=<b>your-api-key</b>%40AMER.OAUTHAP&amp;response_type=code&amp;redirect_uri=http%3A%2F%2Flocalhost</li>
   <li> Paste the link into your browser and click Go or hit Enter. It will take you to a "Secure Log-In" page. You need to log in with a TD Ameritrade <b>client</b> account.</li>
   <li> Once you have logged in click the "Allow" button. It will take you to a "This site can't be reached error" page. You will find the access token in the page URL: <br> 
http://localhost/?code=<b>this-blob-is-your-access-code</b></li>
</ul>
<p>The redirect URI must use <code>http</code>, as <code>https</code> is not supported.</p>

<p>See the following resources for additional information:</p>
<ul>
    <li><a rel="nofollow" target="_blank" href="https://developer.tdameritrade.com/content/authentication-faq">Authentication FAQ</a> on the TD Ameritrade website</li>
    <li><a rel="nofollow" target="_blank" href="https://www.reddit.com/r/algotrading/comments/c81vzq/td_ameritrade_api_access_2019_guide/">TD Ameritrade API Access - 2019 Guide</a> on r/algotrading</li>
<p>In this tutorial, the access token is decoded. QuantConnect's implementation required the encoded access token (see <b>this-blob-is-your-access-code</b> above).</p>
</ul>

<h4>Paper Trading</h4>

<p>The TD Ameritrade API doesn't support paper trading, but you can follow these steps to simulate it:</p>

<ol>
    <li>In the <code>Initialize</code> method of your algorithm, add one of the preceding <code>SetBrokerageModel</code> method calls.</li>
    <li><a href="/docs/v2/cloud-platform/live-trading/brokerages/quantconnect-paper-trading#14-Deploy-Live-Algorithms">Deploy your algorithm with the QuantConnect Paper Trading brokerage</a>.</li>
</ol>
