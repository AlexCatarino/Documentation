<p>The following backtest verifies the <code>LimitOrder</code> behavior. The following table shows the first three trades in the backtest:</p>

<table class="qc-table table" id="research-nodes-table">
    <thead>
        <tr>
            <th>Submitted Time</th>
            <th>Filled Time</th>
            <th>Symbol</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Type</th>
            <th>Status</th>
            <th>Value</th>
            <th>Tag</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>2021-07-01T09:32:00Z</td>
            <td>2021-07-01T09:32:00Z</td>
            <td>SPY</td>
            <td>429.00</td>
            <td>10</td>
            <td>Limit</td>
            <td>Filled</td>
            <td>4290.00</td>
            <td></td>
        </tr>
        <tr>
            <td>2021-07-02T09:31:00Z</td>
            <td>2021-07-02T09:35:00Z</td>
            <td>SPY</td>
            <td>431.70</td>
            <td>-10</td>
            <td>Limit</td>
            <td>Filled</td>
            <td>-4317.00</td>
            <td></td>
        </tr>
        <tr>
            <td>2021-07-02T09:31:00Z</td>
            <td>/</td>
            <td>SPY</td>
            <td>400.00</td>
            <td>10</td>
            <td>Limit</td>
            <td>Submitted</td>
            <td>/</td>
            <td></td>
        </tr>
    </tbody>
</table>

<style>
#research-nodes-table td:nth-child(3), 
#research-nodes-table th:nth-child(3), 
#research-nodes-table td:nth-child(4), 
#research-nodes-table th:nth-child(4), 
#research-nodes-table td:nth-child(7), 
#research-nodes-table th:nth-child(7) {
    text-align: right;
}
</style>

<p>The algorithm sets a condition that on the 1st July 9:31am, it would submit a limit order to buy 10 shares of SPY at a limit price below $429.00. It is expected to be filled at the limit price for a liquid stock like SPY, since its trading price would most likely be continuous with high involvement of market makers. It turns out indeed it was filled at $429.00. Generally, for buy-limit orders of both liquid and illquid assets, the filling price would be the minumum between the ask high price and limit price of the next bar that has ask low price below the limit price.</p>

<p>Another condition would be on the 2nd July 9:31am, it would submit a limit order to sell 10 shares of SPY at a limit price above $431.70. Just like the first order, it is expected that the limit order will be filled at the limit price, which indeed is true. Generally, for sell-limit orders of both liquid and illquid assets, the filling price would be the maximum between the ask low price and limit price of the next bar that has ask high price above the limit price.</p>

<p>The third order is submitted alongside with the second order. It is a limit order that buy 10 shares of SPY if its price was fallen below $400.00, since the condition was never met, it remained unfilled.</p>

<p>To reproduce these results, backtest the following algorithm:</p>

<div class="python"><div class="qc-embed-frame" style="display: inline-block; position: relative; width: 100%; min-height: 100px; min-width: 300px;"><div class="qc-embed-dummy" style="padding-top: 56.25%;"></div><div class="qc-embed-element" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"><iframe class="qc-embed-backtest" src="https://www.quantconnect.com/terminal/processCache?request=embedded_backtest_4f60a9ce339dd650ae7e53efc708804f.html" style="max-width: calc(100vw - 30px); max-height: 100vw; overflow: hidden;" scrolling="no" width="100%" height="100%"></iframe></div></div></div>

<div class="csharp"><div class="qc-embed-frame" style="display: inline-block; position: relative; width: 100%; min-height: 100px; min-width: 300px;"><div class="qc-embed-dummy" style="padding-top: 56.25%;"></div><div class="qc-embed-element" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"><iframe class="qc-embed-backtest" src="https://www.quantconnect.com/terminal/processCache?request=embedded_backtest_83f1d75c4529bcdcc9def92c9b97ab41.html" style="max-width: calc(100vw - 30px); max-height: 100vw; overflow: hidden;" scrolling="no" width="100%" height="100%"></iframe></div></div></div>
