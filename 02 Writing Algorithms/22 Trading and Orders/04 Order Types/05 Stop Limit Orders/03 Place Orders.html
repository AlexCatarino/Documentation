- When you place a stop limit buy (sell) order, set the stop price above (below) the current market price

<p>To send a stop limit order, call the StopMarketOrder method and provide a symbol, quantity, stop price, and limit price. If you do not have sufficient capital for the order, it is rejected.</p>

<div class="section-example-container">
<pre class="csharp">// When SPY trades up to $500, buy 10 shares with a limit order at $490
var marketableBuyTicket = StopMarketOrder("SPY", 10, 500, 490);

// When SPY trades up to $500, buy 10 shares with a limit order at $510
var unmarketableBuyTicket = StopMarketOrder("SPY", 10, 500, 510);

// When SPY trades down to $400, sell 10 shares with a limit order at $390
var marketableSellTicket = StopLimitOrder("SPY", -10, 400, 390);

// When SPY trades down to $400, sell 10 shares with a limit order at $410
var unmarketableSellTicket = StopLimitOrder("SPY", -10, 400, 410);</pre>
<pre class="python"># When SPY trades up to $500, buy 10 shares with a limit order at $490
marketable_buy_ticket = self.StopLimitOrder("SPY", 10, 500, 490)

# When SPY trades up to $500, buy 10 shares with a limit order at $510
unmarketable_buy_ticket = self.StopLimitOrder("SPY", 10, 500, 510)

# When SPY trades down to $400, sell 10 shares with a limit order at $390
marketable_sell_ticket = self.StopLimitOrder("SPY", -10, 400, 390)

# When SPY trades down to $400, sell 10 shares with a limit order at $410
unmarketable_sell_ticket = self.StopLimitOrder("SPY", -10, 400, 410)</pre>
</div>

<p>You can provide a tag and <a href="/docs/v2/writing-algorithms/trading-and-orders/order-properties">order properties</a> to the <code>StopLimitOrder</code> method.</p>
<div class="section-example-container">
<pre class="csharp">StopLimitOrder(symbol, quantity, stopPrice, limitPrice, tag, orderProperties);</pre>
<pre class="python">self.StopLimitOrder(symbol, quantity, stop_rice, limit_price, tag, order_properties)</pre>
</div>

<p>To place a marketable buy stop limit order, set the stop price above the current market price and set the limit price above the stop price.<br></p>
<img src="https://cdn.quantconnect.com/i/tu/marketable-buy-stop-limit-order.png" class="docs-image" alt="When the asset is trading at $46,000, place an unmarketable sell stop limit order with a stop at $59,000 and a limit at $62,000. The stop is hit, the limit is set, and the order fills when the asset trades up to $59,000.">

<p>To place an unmarketable buy stop limit order, set the stop price below the current market price and set the limit price above the stop price.<br></p>
<img src="https://cdn.quantconnect.com/i/tu/unmarketable-buy-stop-limit-order.png" class="docs-image" alt="When the asset is trading at $37,000, place an unmarketable buy stop limit order with a stop at $52,500 and a limit at $41,000. The stop is hit and the limit is set when the asset trades up to $52,500. Then the stop limit order fills when the security trades down to $41,000.">

<p>To place an unmarketable sell stop limit order, set the stop price below the current market price and set the limit price above the stop price.<br></p>
<img src="https://cdn.quantconnect.com/i/tu/unmarketable-sell-stop-limit-order.png" class="docs-image" alt="When the asset is trading at $57,000, place an unmarketable sell stop limit order with a stop at $49,000 and a limit at $58,000. The stop is hit and the limit is set when the asset trades down to $49,000. Then the stop limit order fills when the security trades up to $58,000.">

<p>To place a marketable sell stop limit order, set the stop price below the current market price and set the limit price below the stop price.<br></p>
<img src="https://cdn.quantconnect.com/i/tu/marketable-sell-stop-limit-order.png" class="docs-image" alt="When the asset is trading at $57,000, place a marketable sell stop limit order with a stop at $37,000 and a limit at $34,000. The stop is hit, the limit is set, and the order fills when the asset trades down to $37,000.">
