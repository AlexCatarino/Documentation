<p>Manually creating consolidators gives you the most control over how they are updated and when they are removed.</p>

<h4>Creating Consolidators</h4>
<p>
Follow these steps to manually create a consolidator:</p><p>1) Create a consolidator object (TradeBarConsolidator, QuoteBarConsolidator, TickConsolidator, or TickQuoteConsolidator)</p><p>2) Define the consolidation event handler</p><p>3) Add the event handler to the consolidator</p>

<h4>Updating the Aggregated Bar</h4>

<p>You can update the consolidator manually or automatically.</p><p>- To manually update a consolidator, pass a bar to it's `Update` method.</p><p>- To automatically update a consolidator with a data subscription, create the subscription and then register the consolidator with the Subscription Manager.</p>

<h4>Receiving Consolidated Bars</h4>

<p>The consolidation handler accepts two arguments, the sender (consolidator object) and the consolidated bar.<br></p><div class="section-example-container">
<pre class="python">def Initialize(self):
    # Make sure you have the data you need
    self.AddEquity("QQQ", Resolution.Minute)

    # Create consolidator you need and attach event handler
    thirtyMinuteConsolidator = TradeBarConsolidator(timedelta(minutes=30))
    thirtyMinuteConsolidator.DataConsolidated += self.ThirtyMinuteHandler

    # Register consolidator to get automatically updated with minute data
    self.SubscriptionManager.AddConsolidator("QQQ", thirtyMinuteConsolidator)
    
def ThirtyMinuteHandler(self, sender, consolidated_bar):
    # Bar period is now 30 min from the consolidator above.
    self.Debug(str(consolidated_bar.EndTime - consolidated_bar.Time) + " " + consolidated_bar.ToString())
</pre>
<pre class="csharp">public override void Initialize()
{ 
     // Make sure you have the data you need
    AddEquity("QQQ", Resolution.Minute);

    // Create consolidator you need and attach event handler
    var thirtyMinuteConsolidator = new TradeBarConsolidator(TimeSpan.FromMinutes(30));
    thirtyMinuteConsolidator.DataConsolidated += ThirtyMinuteHandler;

    // Register consolidator to get automatically updated with minute data
    SubscriptionManager.AddConsolidator("QQQ", thirtyMinuteConsolidator);
}

private void ThirtyMinuteHandler(object sender, TradeBar consolidatedBar) {
    // Bar period is 30 min from the consolidator above.
    Debug((consolidatedBar.EndTime - consolidatedBar.Time).ToString() + " " + consolidatedBar.ToString());
}
</pre>
</div><br>

<h4>Removing Consolidators</h4>
<p>If you manually create a consolidator for a universe subscription, you should remember to remove it again later once the security leaves your universe. If you do not "tidy up", these can compound internally, causing your algorithm to slow down and eventually die once it runs out of RAM. You will need to save a reference to the consolidator to remove it cleanly. We recommend using a class to organize all of the symbol-specific objects created over the lifetime of a security in your universe. See this example Alpha as an example of removing consolidators from universe subscriptions. </p>

<div class="section-example-container">
<pre class="csharp">self.SubscriptionManager.RemoveConsolidator(_symbol, _consolidator)
</pre>
<pre class="python">self.SubscriptionManager.RemoveConsolidator(self.symbol, self.consolidator)
</pre>
</div>
