
<p>
Follow these steps to manually create a consolidator:</p><p>1) Create a consolidator object (TradeBarConsolidator, QuoteBarConsolidator, TickConsolidator, or TickQuoteConsolidator)</p><p>2) Define the consolidation event handler</p><p>3) Add the event handler to the consolidator</p><p><br></p><p>You can update the consolidator manually or automatically.</p><p>- To manually update a consolidator, pass a bar to it's `Update` method.</p><p>- To automatically update a consolidator with a data subscription, create the subscription and then register the consolidator with the Subscription Manager.</p><p><br></p><p>The consolidation handler accepts two arguments, the sender (consolidator object) and the consolidated bar.<br></p><div class="section-example-container">
<pre class="python">def Initialize(self):
    # Make sure you have the data you need
    self.AddEquity("QQQ", Resolution.Minute)

    # Create consolidator you need and attach event handler
    thirtyMinuteConsolidator = TradeBarConsolidator(timedelta(minutes=30))
    thirtyMinuteConsolidator.DataConsolidated += self.ThirtyMinuteHandler

    # Register consolidator to get automatically updated with minute data
    self.SubscriptionManager.AddConsolidator("QQQ", thirtyMinuteConsolidator)
    
def ThirtyMinuteHandler(self, sender, consolidated_bar):
    # Bar period is now 30 min from the consolidator above.
    self.Debug(str(consolidated_bar.EndTime - consolidated_bar.Time) + " " + consolidated_bar.ToString())
</pre>
<pre class="csharp">public override void Initialize()
{ 
     // Make sure you have the data you need
    AddEquity("QQQ", Resolution.Minute);

    // Create consolidator you need and attach event handler
    var thirtyMinuteConsolidator = new TradeBarConsolidator(TimeSpan.FromMinutes(30));
    thirtyMinuteConsolidator.DataConsolidated += ThirtyMinuteHandler;

    // Register consolidator to get automatically updated with minute data
    SubscriptionManager.AddConsolidator("QQQ", thirtyMinuteConsolidator);
}

private void ThirtyMinuteHandler(object sender, TradeBar consolidatedBar) {
    // Bar period is 30 min from the consolidator above.
    Debug((consolidatedBar.EndTime - consolidatedBar.Time).ToString() + " " + consolidatedBar.ToString());
}
</pre>
</div><br>