<p>The <code>WeightedBy</code> extension calculates the average <code>.Current.Value</code> of an indicator over a lookback period, weighted by another indicator over the same lookback period. The value of the calculation is <br></p>

$$
Weighted\ Average=\frac{x\cdot y}{\Sum^n_{i=1} y_i}
$$

<p>where $x$ is a vector that contains the historical values of the first indicator, $y = {y_1, ..., y_n}$ is a vector that contains the historical values of the second indicator, and $n$ is the lookback period.</p>

<div class="section-example-container">
<pre class="csharp">var smaShort = SMA("SPY", 14); 
var smaLong = SMA("SPY", 21); 
var weightedSMA = smaShort.WeightedBy(smaLong, 3);
</pre>
<pre class="python">sma_short = self.SMA("SPY", 14)
sma_long = self.SMA("SPY", 21)
weighted_sma = IndicatorExtensions.WeightedBy(sma_short, sma_long, 3)
</pre>
</div>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>