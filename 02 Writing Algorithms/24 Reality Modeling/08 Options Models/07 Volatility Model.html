<meta name="tag" content="trading and orders">
<p>- The Greeks and implied volatility of Option contracts are a function of the historical volatility of the underlying asset.
</p><p>- The volatility model is a property of a security. Exactly how volatility is calculated varies a lot between strategies, so we've provided an override point here. Volatility models get updated with data each time step and are expected to be updated immediately. This is primarily required for options backtesting. <br></p>
<p><br></p><p>Supported Volatility Models:</p><p>- StandardDeviationOfReturnsVolatilityModel: Computes the annualized sample standard deviation of daily returns as the volatility of the security<br></p><p>- RelativeStandardDeviationVolatilityModel: computes the relative standard deviation as the volatility of the security</p><p>- IndicatorVolatilityModel: uses an indicator to compute its value</p><p>- NullVolatilityModel: always returns 0 for its volatility <br></p><p><br></p><p>Default Behavior: <br></p><p>- StandardDeviationOfReturnsVolatilityModel based on 30 days of minute-resolution data<br></p><p><br></p><p>Set Volatility Models:</p>

<p>- To set the volatility model of the underlying security, set the VolatilityModel property of the security.<br></p>

<div class="section-example-container">
    <pre class="csharp" style="">// In Initialize
var underlying = AddEquity("SPY");
underlying.VolatilityModel = new StandardDeviationOfReturnsVolatilityModel(30, Resolution.Minute);</pre>
    <pre class="python"># In Initialize
security = self.AddEquity("SPY")
security.VolatilityModel = StandardDeviationOfReturnsVolatilityModel(30, Resolution.Minute)</pre>
</div>


<p>- You can also set the volatility model in a security initializer. If 
your algorithm has a universe of underlying assets, use the security initializer technique. 
In order to initialize single security subscriptions with the security 
initializer, call SetSecurityInitializer before you create the 
subscriptions.</p>

<div class="section-example-container">
<pre class="csharp" style="">// In Initialize
SetSecurityInitializer(CustomSecurityInitializer);
AddEquity("SPY");

private void CustomSecurityInitializer(Security security)
{<br>    if (security.Type == SecurityType.Equity)<br>    {
        security.VolatilityModel = new StandardDeviationOfReturnsVolatilityModel(30, Resolution.Minute);<br>    }
}
</pre>
<pre class="python"># In Initialize
self.SetSecurityInitializer(self.CustomSecurityInitializer)
AddEquity("SPY")

def CustomSecurityInitializer(self, security):<br>    if security.Type == SecurityType.Equity:
        security.VolatilityModel = StandardDeviationOfReturnsVolatilityModel(30, Resolution.Daily)
</pre>
</div>



<p><br></p><p>Warm Up Volatility Models</p><p>- (What/Why) You need to warm up the volatility model on the underlying security in order for the option price model to accurately calculate the IV, Greeks, and theoretical pricing values.</p><p>- (How)</p><p>&nbsp;&nbsp;&nbsp; - If you add all options with AddOption, set a warm up period to warm up the volaility models. The duration of the warm up period should be at least as long as the data the volatility model needs to compute values. <br></p><div>

<div class="section-example-container">
    <pre class="csharp">// In Initialize
SetWarmUp(30, Resolution.Daily);<br><br>// In OnData<br>if (IsWarmingUp) return;<br></pre>
    <pre class="python"># In Initialize
self.SetWarmUp(30, Resolution.Daily)<br><br># In OnData<br>if self.IsWarmingUp:<br>    return<br></pre>
</div>




</div><div><br></div><div>Custom Volatility Models:</div><div><br></div><div>- Volatility models implement the 
$[VolatilityModel,T:QuantConnect.Securities.VolatilityModel] interface. 
We default to the NullVolatilityModel which returns 0 volatility at all 
times. As a helper, we also provide the 
$[RelativeStandardDeviationVolatilityModel,T:QuantConnect.Securities.RelativeStandardDeviationVolatilityModel],
 which calculates the volatility based on standard deviation. </div><div><br></div><div><br></div><div><br>
## TODO: How to warm up the volatility model <br></div><div>https://www.quantconnect.com/tutorials/introduction-to-options/historical-volatility-and-implied-volatility</div><div>https://www.quantconnect.com/tutorials/introduction-to-options/local-volatility-and-stochastic-volatility<br></div><div>https://github.com/QuantConnect/Documentation/issues/102<br></div>
