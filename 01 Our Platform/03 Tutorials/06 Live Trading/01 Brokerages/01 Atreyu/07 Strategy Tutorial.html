<p>Follow these steps to create an algorithm using the Atreyu brokerage:</p>

<ol>
    <li><a href='../../projects/managing-projects#03-Create-New-Projects'>Create a new project</a>.</li>
    <li>In the <code>Initialize</code> method in <i class='python'>main.py</i><i class='csharp'>Main.cs</i>, set the brokerage model to Atreyu.</li>
    <div class="section-example-container">
        <pre class="csharp">SetBrokerageModel(BrokerageName.Atreyu);
        </pre>
        <pre class="python">self.SetBrokerageModel(BrokerageName.Atreyu)
        </pre>
    </div>
    <li>In the <code>Initialize</code> method in <i class='python'>main.py</i><i class='csharp'>Main.cs</i>, set the default order properties.</li>
    <div class="section-example-container">
        <pre class="csharp">
DefaultOrderProperties = new AtreyuOrderProperties
{
    Exchange = Exchange.BATS,
    TimeInForce = TimeInForce.Day
};
        </pre>
        <pre class="python">
self.DefaultOrderProperties = AtreyuOrderProperties()
self.DefaultOrderProperties.Exchange = Exchange.BATS
self.DefaultOrderProperties.TimeInForce = TimeInForce.Day
        </pre>
    </div>
    <li>When you want to send an order to a different exchange, pass an <code>AtreyuOrderProperties</code> argument to the <code>SetHoldings</code> method.</li>
    <div class="section-example-container">
        <pre class="csharp">
MarketOrder(symbol, quantity, orderProperties: new AtreyuOrderProperties { Exchange = Exchange.ARCA });
        </pre>
        <pre class="python">
orderProperties = AtreyuOrderProperties()
orderProperties.Exchange = Exchange.ARCA
self.MarketOrder(self.symbol, quantity, orderProperties = orderProperties)
        </pre>
    </div>
    <li>When you want to check if a there are enough shares available to fill your short order, use the <code>Shortable</code> method.</li>
    <div class="section-example-container">
        <pre class="csharp">
var quantity = CalculateOrderQuantity(symbol, -0.1m);
var canShort = Shortable(symbol, quantity);
        </pre>
        <pre class="python">
quantity = self.CalculateOrderQuantity(self.symbol, -0.1)
can_short = self.Shortable(self.symbol, quantity)
        </pre>
    </div>
</ol>

<p>Refer to the backtest below for a full example.</p>

<div class="qc-embed-frame python" style="display: inline-block; position: relative; width: 100%; min-height: 100px; min-width: 300px;"><div class="qc-embed-dummy" style="padding-top: 56.25%;"></div><div class="qc-embed-element" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"><iframe class="qc-embed-backtest" src="https://www.quantconnect.com/terminal/processCache?request=embedded_backtest_fbfa009137b6af0629e954f55386becd.html" style="max-width: calc(100vw - 30px); max-height: 100vw; overflow: hidden;" scrolling="no" width="100%" height="100%"></iframe></div></div>

<div class="qc-embed-frame csharp" style="display: inline-block; position: relative; width: 100%; min-height: 100px; min-width: 300px;"><div class="qc-embed-dummy" style="padding-top: 56.25%;"></div><div class="qc-embed-element" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"><iframe class="qc-embed-backtest" src="https://www.quantconnect.com/terminal/processCache?request=embedded_backtest_4f47a7f5179dbae233ef497ff7832aed.html" style="max-width: calc(100vw - 30px); max-height: 100vw; overflow: hidden;" scrolling="no" width="100%" height="100%"></iframe></div></div>