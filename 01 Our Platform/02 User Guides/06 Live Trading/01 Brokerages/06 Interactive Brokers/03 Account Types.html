<p>The IB brokerage model supports individual and Financial Advisor (FA) accounts.</p>

<h4>Individual Accounts</h4>
<p>The IB brokerage model supports cash and margin accounts.</p>

<div class="section-example-container">
    <pre class="csharp">SetBrokerageModel(BrokerageName.InteractiveBrokersBrokerage, AccountType.Cash);
        SetBrokerageModel(BrokerageName.InteractiveBrokersBrokerage, AccountType.Margin);</pre>
    <pre class="python">self.SetBrokerageModel(BrokerageName.InteractiveBrokersBrokerage, AccountType.Cash)
self.SetBrokerageModel(BrokerageName.InteractiveBrokersBrokerage, AccountType.Margin)</pre>
</div>

<h4>FA Accounts</h4>
<p>The IB brokerage model supports Financial Advisor accounts for Trading Firm and Institution organizations. FA accounts enable certified professionals to use a single trading algorithm to manage several client accounts. To place trades using a subset of client accounts, <a href="https://guides.interactivebrokers.com/tws/usersguidebook/financialadvisors/create_an_account_group_for_share_allocation.htm">create Account Groups in Trader Workstation</a> and then define the <code>InteractiveBrokersOrderProperties</code> when creating orders.</p>

<div class="section-example-container">
    <pre class="csharp">DefaultOrderProperties = new InteractiveBrokersOrderProperties
{
    FaGroup = "TestGroupEQ",
    FaMethod = "EqualQuantity",
    FaProfile = "TestProfileP",
    Account = "DU123456"
};</pre>
    <pre class="python">self.DefaultOrderProperties = InteractiveBrokersOrderProperties()
self.DefaultOrderProperties.FaGroup = "TestGroupEQ"
self.DefaultOrderProperties.FaMethod = "EqualQuantity"
self.DefaultOrderProperties.FaProfile = "TestProfileP"
self.DefaultOrderProperties.Account = "DU123456"</pre>
</div>

<p>The following allocation methods (<code>FaMethod</code>) are supported for FA group orders:</p>
<ul>
    <li><b>EqualQuantity</b>: Distributes shares equally between all accounts in the group. Specify an order size when using this method.<br></li>
    <li><b>NetLiq</b>: Distributes shares based on the net liquidation value of each account. The system calculates ratios based on the Net Liquidation value in each account and allocates shares based on these ratios. Specify an order size when using this method.<br></li>
    <li><b>AvailableEquity</b>: Distributes shares based on the amount of available equity in each account. The system calculates ratios based on the Available Equity in each account and allocates shares based on these ratios. Specify an order size when using this method.</li>
    <li><b>PctChange</b>: Increases or decreases an already existing position. Positive percents will increase a position, negative percents will decrease a position. Don't specify an order size when using this method.</li>
</ul>

<div class="section-example-container">
    <pre class="csharp">public override void Initialize()
{
    DefaultOrderProperties = new InteractiveBrokersOrderProperties()
    {
        FaGroup = "TestGroupEQ",
        FaMethod = "EqualQuantity",
        FaProfile = "TestProfileP",
        Account = "DU123456"
    };
}

public override void OnData(Slice data)
{
    LimitOrder(_symbol, quantity, limitPrice);
    
    var orderProperty1 = new InteractiveBrokersOrderProperties();
	orderProperty1.FaMethod = "NetLiq";
    LimitOrder(_symbol, quantity, limitPrice, orderProperties: orderProperty1);

    var orderProperty2 = new InteractiveBrokersOrderProperties();
	orderProperty2.FaMethod = "AvailableEquity";
    LimitOrder(_symbol, quantity, limitPrice, orderProperties: orderProperty2);

    var orderProperty3 = new InteractiveBrokersOrderProperties();
	orderProperty3.FaMethod = "PctChange";
    LimitOrder(_symbol, quantity, limitPrice, orderProperties: orderProperty3);
}</pre>
    <pre class="python">def Initialize(self):
    self.DefaultOrderProperties = InteractiveBrokersOrderProperties()
    self.DefaultOrderProperties.FaGroup = "TestGroupEQ"
    self.DefaultOrderProperties.FaMethod = "EqualQuantity"
    self.DefaultOrderProperties.FaProfile = "TestProfileP"
    self.DefaultOrderProperties.Account = "DU123456"

def OnData(self, data):
    self.LimitOrder(self.symbol, quantity, limit_price)

    orderProperty1 = OrderProperties()
	orderProperty1.FaMethod = "NetLiq"
    self.LimitOrder(self.symbol, quantity, limit_price, orderProperties=orderProperty1)

    orderProperty2 = OrderProperties()
	orderProperty2.FaMethod = "AvailableEquity"
    self.LimitOrder(self.symbol, quantity, limit_price, orderProperties=orderProperty2)

    orderProperty3 = OrderProperties()
	orderProperty3.FaMethod = "PctChange"
    self.LimitOrder(self.symbol, quantity, limit_price, orderProperties=orderProperty3)</pre>
</div>