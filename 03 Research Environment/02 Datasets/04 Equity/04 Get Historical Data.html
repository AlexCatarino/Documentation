<p>You need a <a href="#03-Create-Subscriptions">subscription</a> before you can request historical data for a security. On the time dimension, you can request an amount of historical data based on a trailing number of bars, a trailing period of time, or a defined period of time. On the security dimension, you can request historical data for a single Equity, a subset of the Equities you created subscriptions for in your notebook, or all of the Equities in your notebook.</p>

<h4>Trailing Number of Bars<br></h4>
<p>To get historical data for a number of trailing bars, call the <code>History</code> method with the <code>Symbol</code> object(s) and an integer.</p>
<div class="section-example-container">
    <pre class="csharp">// Slice objects
var singleHistorySlice = qb.History(spy, 10);
var subsetHistorySlice = qb.History(new[] {spy, tlt}, 10);
var allHistorySlice = qb.History(10);

// TradeBar objects
var singleHistoryTradeBars = qb.History&lt;TradeBar&gt;(spy, 10);
var subsetHistoryTradeBars = qb.History&lt;TradeBar&gt;(new[] {spy, tlt}, 10);
var allHistoryTradeBars = qb.History&lt;TradeBar&gt;(qb.Securities.Keys, 10);

// QuoteBar objects
var singleHistoryQuoteBars = qb.History&lt;QuoteBar&gt;(spy, 10);
var subsetHistoryQuoteBars = qb.History&lt;QuoteBar&gt;(new[] {spy, tlt}, 10);
var allHistoryQuoteBars = qb.History&lt;QuoteBar&gt;(qb.Securities.Keys, 10);</pre>
    <pre class="python"># DataFrame
single_history_df = qb.History(spy, 10)
subset_history_df = qb.History([spy, tlt], 10)
all_history_df = qb.History(qb.Securities.Keys, 10)

# Slice objects
all_history_slice = qb.History(10)

# TradeBar objects
single_history_trade_bars = qb.History[TradeBar](spy, 10)
subset_history_trade_bars = qb.History[TradeBar]([spy, tlt], 10)
all_history_trade_bars = qb.History[TradeBar](qb.Securities.Keys, 10)

# QuoteBar objects
single_history_quote_bars = qb.History[QuoteBar](spy, 10)
subset_history_quote_bars = qb.History[QuoteBar]([spy, tlt], 10)
all_history_quote_bars = qb.History[QuoteBar](qb.Securities.Keys, 10)</pre>
</div>
<p>The preceding calls return the most recent bars, excluding periods of time when the exchange was closed.</p>

<h4>Trailing Period of Time<br></h4>
<p>To get historical data for a trailing period of time, call the <code>History</code> method with the&nbsp;<code style="font-size: 15px; background-color: rgb(255, 255, 255);">Symbol</code>&nbsp;object(s) and a&nbsp;<code class="csharp">TimeSpan</code><code class="python">timedelta</code>.</p>
<div class="section-example-container">
    <pre class="csharp">// Slice objects
var singleHistorySlice = qb.History(spy, TimeSpan.FromDays(3));
var subsetHistorySlice = qb.History(new[] {spy, tlt}, TimeSpan.FromDays(3));
var allHistorySlice = qb.History(10);

// TradeBar objects
var singleHistoryTradeBars = qb.History&lt;TradeBar&gt;(spy, TimeSpan.FromDays(3));
var subsetHistoryTradeBars = qb.History&lt;TradeBar&gt;(new[] {spy, tlt}, TimeSpan.FromDays(3));
var allHistoryTradeBars = qb.History&lt;TradeBar&gt;(qb.Securities.Keys, TimeSpan.FromDays(3));

// QuoteBar objects
var singleHistoryQuoteBars = qb.History&lt;QuoteBar&gt;(spy, TimeSpan.FromDays(3));
var subsetHistoryQuoteBars = qb.History&lt;QuoteBar&gt;(new[] {spy, tlt}, TimeSpan.FromDays(3));
var allHistoryQuoteBars = qb.History&lt;QuoteBar&gt;(qb.Securities.Keys, TimeSpan.FromDays(3));

// Tick objects
var singleHistoryQuoteBars = qb.History&lt;Tick&gt;(spy, TimeSpan.FromDays(3), Resolution.Tick);
var subsetHistoryQuoteBars = qb.History&lt;Tick&gt;(new[] {spy, tlt}, TimeSpan.FromDays(3), Resolution.Tick);
var allHistoryQuoteBars = qb.History&lt;Tick&gt;(qb.Securities.Keys, TimeSpan.FromDays(3), Resolution.Tick);</pre>
    <pre class="python"># DataFrame
single_history_df = qb.History(spy, timedelta(days=3))
subset_history_df = qb.History([spy, tlt], timedelta(days=3))
all_history_df = qb.History(qb.Securities.Keys, timedelta(days=3))

# Slice objects
all_history_slice = qb.History(timedelta(days=3))

# TradeBar objects
single_history_trade_bars = qb.History[TradeBar](spy, timedelta(days=3))
subset_history_trade_bars = qb.History[TradeBar]([spy, tlt], timedelta(days=3))
all_history_trade_bars = qb.History[TradeBar](qb.Securities.Keys, timedelta(days=3))

# QuoteBar objects
single_history_quote_bars = qb.History[QuoteBar](spy, timedelta(days=3))
subset_history_quote_bars = qb.History[QuoteBar]([spy, tlt], timedelta(days=3))
all_history_quote_bars = qb.History[QuoteBar](qb.Securities.Keys, timedelta(days=3))

# Tick objects
single_history_ticks = qb.History[Tick](spy, timedelta(days=3), Resolution.Tick)
subset_history_ticks = qb.History[Tick]([spy, tlt], timedelta(days=3), Resolution.Tick)
all_history_ticks = qb.History[Tick](qb.Securities.Keys, timedelta(days=3), Resolution.Tick)</pre>
</div>
<p>The preceding calls return the most recent bars, excluding periods of time when the exchange was closed.</p>

<h4>Defined Period of Time<br></h4>
<p>Call the <code>History</code> method with a symbol, start  <code class="csharp">DateTime</code><code class="python">datetime</code>, end  <code class="csharp">DateTime</code><code class="python">datetime</code>, and resolution to request historical data based on the defined period of time and resolution.</p>

<div class="section-example-container">
    <pre class="csharp">var startTime = new DateTime(2021, 1, 1);
var endTime = new DateTime(2021, 2, 1);
var history = qb.History(symbol, startTime, endTime, Resolution.Daily);</pre>
    <pre class="python">start_time = datetime(2021, 1, 1)
end_time = datetime(2021, 2, 1)
history = qb.History(symbol, start_time, end_time, Resolution.Daily)</pre>
</div>

<p>The call returns the bars that are timestamped within the defined period of time.</p>

<p class="python">In all of the cases above, the <code>History</code> method returns a <code>DataFrame</code> with a <code>MultiIndex</code>.</p>

<img class="python docs-image" src="https://cdn.quantconnect.com/i/tu/reserachhistoryequityonesecurityfulldataframe.png">

<p class="python">If you do not pass a resolution to the <code>History</code> method, the <code>History</code> method uses the resolution that the <code>AddEquity</code> method used when you created the <a href="#03-Create-Subscriptions">security subscription</a>.</p>

<p class="csharp">In all of the cases above, the <code>History</code> method returns an <code>IEnumerable&lt;TradeBar&gt;</code> for single-security requests. If you do not pass a resolution to the <code>History</code> method, the <code>History</code> method uses the resolution that the <code>AddEquity</code> method used when you created the <a href="#03-Create-Subscriptions">security subscription</a>.</p>
