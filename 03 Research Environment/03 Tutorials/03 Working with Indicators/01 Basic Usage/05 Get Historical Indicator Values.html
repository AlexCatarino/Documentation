<p>We can use Classical Approach or Indicator Helper Method to get historical indicator data.</p>

<h4>Classical Approach</h4>
<ol>
    <li>Create a <code>RollingWindow</code> for each indicator to hold their values.</li>
    <p>In this example, we'd like to get the past 50 data points.</p>
    <div class="section-example-container">
        <pre class="csharp">var bbRollingWindow = new RollingWindow&lt;IndicatorDataPoint&gt;(50);
var atrRollingWindow = new RollingWindow&lt;IndicatorDataPoint&gt;(50);
var vwapRollingWindow = new RollingWindow&lt;IndicatorDataPoint&gt;(50);
var smaOfRsiRollingWindow = new RollingWindow&lt;IndicatorDataPoint&gt;(50);</pre>
        <pre class="python">bb_rolling_window = RollingWindow[IndicatorDataPoint](50)
atr_rolling_window = RollingWindow[IndicatorDataPoint](50)
vwap_rolling_window = RollingWindow[IndicatorDataPoint](50)
sma_of_rsi_rolling_window = RollingWindow[IndicatorDataPoint](50)</pre>
    </div>

    <li>Set handler methods to update the <code>RollingWindow</code>s.</li>
    <div class="section-example-container">
        <pre class="csharp">bb.Updated += (sender, updated) =&gt; bbRollingWindow.Add(updated);
atr.Updated += (sender, updated) =&gt; atrRollingWindow.Add(updated);
vwap.Updated += (sender, updated) =&gt; vwapRollingWindow.Add(updated);
smaOfRsi.Updated += (sender, updated) =&gt; smaOfRsiRollingWindow.Add(updated);</pre>
        <pre class="python">bb.Updated += lambda sender, updated: bb_rolling_window.Add(updated)
atr.Updated += lambda sender, updated: atr_rolling_window.Add(updated)
vwap.Updated += lambda sender, updated: vwap_rolling_window.Add(updated)
sma_of_rsi.Updated += lambda sender, updated: sma_of_rsi_rolling_window.Add(updated)</pre>
    </div>
    <p>When the indicators receive new data, the handler will add the new <code>IndicatorDataPoints</code> into the <code>RollingWindow</code>s.</p>

    <li>Get historical <code class="csharp">TradeBar</code><code class="python">Slice</code> for the last 70-day to warm-up the indicators and get the datapoints we'd like to study.</li>
    <div class="section-example-container">
        <pre class="csharp">var history = qb.History&lt;TradeBar&gt;(symbol, 70, Resolution.Daily);</pre>
        <pre class="python">history = qb.History(symbol, 70, Resolution.Daily)</pre>
    </div>

    <li>Iterate each slice to update the indicators and the <code>RollingWindow</code>s.</li>
    <div class="section-example-container">
        <pre class="csharp">foreach(var bar in history){
    // Update the indicators
    bb.Update(bar.EndTime, bar.Close);
    atr.Update(bar);
    vwap.Update(bar);
    rsi.Update(bar.EndTime, bar.Close);    // We update the "base" indicator for a combined indicator.
}</pre>
        <pre class="python">for bar in history.itertuples():
    # get the EndTime.
    date = bar.Index[1]    
    # Reconstruct a TradeBar object that Bar/TradeBar Indicators required.
    trade_bar = TradeBar(date, symbol, bar.open, bar.high, bar.low, bar.close, bar.volume)
    
    # Update the indicators
    bb.Update(date, bar.close)
    atr.Update(trade_bar)
    vwap.Update(trade_bar)
    rsi.Update(date, bar.close)    # We update the "base" indicator for a combined indicator.</pre>
    </div>

    <li class="csharp">Display the data.</li>
    <div class="csharp section-example-container">
        <pre class="csharp">foreach(var point in bbRollingWindow.Take(5)){
    Console.WriteLine($"Bollinger Bands: {point.Time}: {point.Value}");
}
foreach(var point in atrRollingWindow.Take(5)){
    Console.WriteLine($"Average True Range: {point.Time}: {point.Value}");
}
foreach(var point in vwapRollingWindow.Take(5)){
    Console.WriteLine($"VWAP: {point.Time}: {point.Value}");
}
foreach(var point in smaOfRsiRollingWindow.Take(5)){
    Console.WriteLine($"SMA of RSI: {point.Time}: {point.Value}");
}</pre>
    </div>
    <img class="csharp" src="https://cdn.quantconnect.com/i/tu/indicator-basic-cs-classic.png">

    <li class="python">Convert the <code>RollingWindow</code>s' data into <code>pandas.DataFrame</code>.</li>
    <div class="python section-example-container">
        <pre class="python">bb_df = pd.DataFrame([point.Value for point in bb_rolling_window], 
                     index=[point.Time for point in bb_rolling_window],
                     columns=["Bollinger Bands"])[::-1]       # Reverse the order.

atr_df = pd.DataFrame([point.Value for point in atr_rolling_window], 
                      index=[point.Time for point in atr_rolling_window],
                      columns=["Average True Range"])[::-1]

vwap_df = pd.DataFrame([point.Value for point in vwap_rolling_window], 
                       index=[point.Time for point in vwap_rolling_window],
                       columns=["Volume Weighted AVerage Price"])[::-1]

sma_of_rsi_df = pd.DataFrame([point.Value for point in sma_of_rsi_rolling_window], 
                             index=[point.Time for point in sma_of_rsi_rolling_window],
                             columns=["SAM of RSI"])[::-1]</pre>
    </div>

    <li class="python">Combine the <code>DataFrame</code> to have a look.</li>
    <div class="python section-example-container">
        <pre class="python">df = pd.concat([bb_df,
               atr_df,
               vwap_df,
               sma_of_rsi_df],
              axis=1)
df = df.groupby(df.index.date).sum()</pre>
    </div>
    <img class="python" src="https://cdn.quantconnect.com/i/tu/indicator-basic-py-classic.png">
</ol>

<div class="python">
    <h4>Indicator Helper Method</h4>
    <p>We can call <code>qb.Indicator</code> method to get historical indicator data for fixed-time interval indicators.</p>
    <div class="section-example-container">
        <pre class="csharp"></pre>
        <pre class="python">bb_indicator = qb.Indicator(bb, symbol, 50, Resolution.Daily)</pre>
    </div>
    <img class="python" src="https://cdn.quantconnect.com/i/tu/indicator-basic-py-helper-bb.png">
    <div class="section-example-container">
        <pre class="csharp"></pre>
        <pre class="python">atr_indicator = qb.Indicator(atr, symbol, 50, Resolution.Daily)</pre>
    </div>
    <img class="python" src="https://cdn.quantconnect.com/i/tu/indicator-basic-py-helper-atr.png">
    <div class="section-example-container">
        <pre class="csharp"></pre>
        <pre class="python">vwap_indicator = qb.Indicator(vwap, symbol, 50, Resolution.Daily)</pre>
    </div>
    <img class="python" src="https://cdn.quantconnect.com/i/tu/indicator-basic-py-helper-vwap.png">
    <div class="section-example-container">
        <pre class="csharp"></pre>
        <pre class="python">sma_of_rsi_indicator = qb.Indicator(sma_of_rsi, symbol, 50, Resolution.Daily)</pre>
    </div>
    <img class="python" src="">
</div>