<p>You must <a href="#02-Import-Packages">import the plotting packages</a> and <a href="#03-Get-Historical-Data">get some historical data</a> to create scatter plots.</p>

<p>We would like to visualize the correlation of the first 2 bank stocks. To do this, we will employ a scatter plot of their returns.</p>

<p>Follow these steps to create a scatter chart:</p>

<h4>Prepare the Data</h4>
<ol>
    <li>Select the 2 <code>Symbol</code>s that you want to plot in the scatter chart.</li>
    <p>For example, to select the first 2 selected bank stocks <code>Symbol</code>s, run:</p>
<div class="section-example-container">
    <pre class="python">symbol1 = symbols[1]
symbol2 = symbols[2]</pre>
</div>

    <li>Slice the <code>history</code> DataFrame with the <code>Symbol</code>s and then select the column that you want to plot.</li>
    <p>For example, to select the closing prices, run:</p>
    <div class="section-example-container">
        <pre class="python">close_price1 = history.loc[symbol1]['close']
close_price2 = history.loc[symbol2]['close']</pre>
    </div>

    <li>Call the <code>pct_change</code> method on each <code>pandas.Series</code> object.</li>
    <div class="section-example-container">
        <pre class="python">daily_ret1 = close_price1.pct_change()
daily_ret2 = close_price2.pct_change()</pre>
    </div>

    <li>Drop any NaN values by <code>dropna</code> to avoid regression error.</li>
    <div class="section-example-container">
        <pre class="python">daily_ret1.dropna(inplace=True)
daily_ret2.dropna(inplace=True)</pre>
    </div>
</ol>

<h4>Create a Trend Line</h4>
<p>Since we would like to include a trend line (OLS) in our scatter plot, we will need to employ <code>numpy</code> to calculate our OLS line.</p>
<ol>
    <li>Get coefficients of the trend line.</li>
    <div class="section-example-container">
        <pre class="python">m, b = np.polyfit(daily_ret1, daily_ret2, deg=1)</pre>
    </div>

    <li>Get the continuous x-axis values of the trend line by <code>np.linspace</code>.</li>
    <div class="section-example-container">
        <pre class="python">upper_limit = 0.05
lower_limit = -0.05
x = np.linspace(lower_limit, upper_limit)</pre>
    </div>

    <li>Get the y-axis values with the corresponding x-axis values through regression result.</li>
    <div class="section-example-container">
        <pre class="python">y = x * m + b</pre>
    </div>
</ol>

<h4>Plot the Data</h4>
<ol>
    <li>Set up the figure with <code>figsize</code> setting.</li>
    <div class="section-example-container">
        <pre class="python">plt.figure(figsize=(15, 10))</pre>
    </div>

    <li>Call the <code>plot</code> method with x-axis values, y-axis-values and color setting to plot the trend line.</li>
    <div class="section-example-container">
        <pre class="python">plt.plot(x, y, color='red')</pre>
    </div>

    <li>Call <code>scatter</code> method with the 2 series of daily return data.</li>
    <div class="section-example-container">
        <pre class="python">plt.scatter(daily_ret1, daily_ret2)</pre>
    </div>

    <li>Set up the title, x-axis label and y-axis label of the plot.</li>
    <div class="section-example-container">
        <pre class="python">plt.title(f'{symbol1} vs {symbol2} daily returns Scatter Plot')
plt.xlabel(symbol1.Value)
plt.ylabel(symbol2.Value)</pre>
    </div>

    <li>Show the plot.</li>
    <div class="section-example-container">
        <pre class="python">plt.show()</pre>
    </div>
    <p>The Jupyter Notebook displays a scatter plot.</p>
    <img style="max-width: 100%; display: block" src="https://cdn.quantconnect.com/i/tu/matplotlib-scatter-3.png">
</ol>