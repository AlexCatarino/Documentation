<p>To define a custom data type, inherit the <code class="csharp">BaseData</code><code class="python">PythonData</code> class and override the <a href="/docs/v2/writing-algorithms/importing-data/streaming-data/key-concepts#04-Set-Data-Sources">GetSource</a> and <a href="/docs/v2/writing-algorithms/importing-data/streaming-data/key-concepts#05-Parse-Custom-Data">Reader</a> methods.</p>


<p>If you need to create multiple objects in your <code class="csharp">Reader</code><code class="python">reader</code> method from a single <code>line</code>, follow these steps:</p>

<ol>
    <li>In the <code class="csharp">GetSource</code><code class="python">get_source</code> method, pass <code class="csharp">FileFormat.UnfoldingCollection</code><code class="python">FileFormat.UNFOLDING_COLLECTION</code> as the third argument to the <code>SubscriptionDataSource</code> constructor.</li>
    <li>In the <code class="csharp">Reader</code><code class="python">reader</code> method, order the objects by their timestamp and then return a <code class="csharp">BaseDataCollection(endTime, config.Symbol, objects)</code><code class="python">BaseDataCollection(end_time, config.symbol, objects)</code> where <code>objects</code> is a list of your custom data objects.</li>
</ol>

<div class="section-example-container">
    <pre class="csharp">using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

public class StockDataSource : BaseData
{
    public List&lt;Symbol&gt; Symbols { get; set; } = [];
    public override DateTime EndTime =&gt; Time.AddDays(1);
    public string Line { get; set; }

    public override SubscriptionDataSource GetSource(SubscriptionDataConfig config, DateTime date, bool isLiveMode)
    {
        if (!isLiveMode)
        {
             return new SubscriptionDataSource("universe-example.json", SubscriptionTransportMedium.ObjectStore, FileFormat.UnfoldingCollection);
        }
        return new SubscriptionDataSource("https://raw.githubusercontent.com/QuantConnect/Documentation/master/Resources/datasets/custom-data/universe-example.json", SubscriptionTransportMedium.RemoteFile, FileFormat.UnfoldingCollection);
    }

    public override BaseData Reader(SubscriptionDataConfig config, string line, DateTime date, bool isLiveMode)
    {
        List&lt;StockDataSource&gt; objects = [];
        foreach(var obj in JsonConvert.DeserializeObject(line) as JArray)
        {
            var stocks = new StockDataSource()
            {
                Time = isLiveMode
                    ? DateTime.UtcNow.ConvertFromUtc(config.DataTimeZone) 
                    : DateTime.ParseExact(obj["Date"].Value&lt;string&gt;(), "yyyyMMdd", null),
                Line = JsonConvert.SerializeObject(obj)
            };

            stocks.Symbols.AddRange(obj["Symbols"].Values&lt;string&gt;().Select(ticker =&gt;
            {
                // The tickers are point-in-time. We generate its security identifier for a given date
                // Then we create a Symbol where the Value is the ticker
                var sid = SecurityIdentifier.GenerateEquity(ticker, Market.USA, mappingResolveDate: stocks.Time);
                return new Symbol(sid, ticker);
            }));

            objects.Add(stocks);
        }

        return new BaseDataCollection(objects.Last().EndTime, config.Symbol, objects);
    }
}</pre>
<pre class="python">class StockDataSource(PythonData):
    def get_source(self, config: SubscriptionDataConfig, date: datetime, is_live: bool) -> SubscriptionDataSource:
        if not is_live:
            return SubscriptionDataSource("universe-example.json", SubscriptionTransportMedium.OBJECT_STORE, FileFormat.UNFOLDING_COLLECTION)
        return SubscriptionDataSource("https://raw.githubusercontent.com/QuantConnect/Documentation/master/Resources/datasets/custom-data/universe-example.json", SubscriptionTransportMedium.REMOTE_FILE, FileFormat.UNFOLDING_COLLECTION)

    def reader(self, config: SubscriptionDataConfig, line: str, date: datetime, is_live: bool) -> BaseData:
        def convert(obj):
            stocks = StockDataSource()
            stocks.time = datetime.strptime(obj["Date"], "%Y%m%d")
            def point_in_time(ticker):
                # The tickers are point-in-time. We generate its security identifier for a given date
                # Then we create a Symbol where the value is the ticker
                sid = SecurityIdentifier.generate_equity(ticker, Market.USA, mapping_resolve_date=stocks.time)
                return Symbol(sid, ticker)
            stocks.symbols = [point_in_time (ticker) for ticker in obj["Symbols"]]
            return stocks

        objects = [convert(obj) for obj in json.loads(line)]

        return BaseDataCollection(objects[-1].end_time, config.symbol, objects)</pre>
</div>