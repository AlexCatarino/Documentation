<p>Follow these steps to check if you have enough margin remaining to cover the initial <a href='/docs/v2/writing-algorithms/reality-modeling/buying-power#03-What-is-Margin3F'>margin requirements</a> of an order:</p>

<ol>
    <li>Create an <code>InitialMarginParameters</code> object with the security and quantity you want to trade.</li>
    <div class="section-example-container">
        <pre class="csharp">var parameter = new InitialMarginParameters(security, quantity);</pre>
        <pre class="python">parameter = InitialMarginParameters(security, quantity)</pre>
    </div>

    <li>Call the <code class="csharp">GetInitialMarginRequirement</code><code class="python">get_initial_margin_requirement</code> method of the security's buying power model with the <code>InitialMarginParameters</code>.</li>
    <div class="section-example-container">
        <pre class="csharp">var initialMargin = security.BuyingPowerModel.GetInitialMarginRequirement(parameter);</pre>
        <pre class="python">initial_margin = security.buying_power_model.get_initial_margin_requirement(parameter)</pre>
    </div>

    <p>The <code class="csharp">GetInitialMarginRequirement</code><code class="python">get_initial_margin_requirement</code> method returns an <code>InitialMargin</code> object, which have the following properties:</p>    
    <div data-tree='QuantConnect.Securities.InitialMargin'></div>

    <li>Compare the margin you have remaining against the initial margin requirement of the order.</li>
    <div class="section-example-container">
        <pre class="csharp">if (Portfolio.MarginRemaining >= initialMargin.Value)
{
    MarketOrder(security.Symbol, quantity);
}
else
{
    Debug("You don't have sufficient margin for this order.");
}</pre>
        <pre class="python">if self.portfolio.margin_remaining >= initial_margin.value:
    self.market_order(security.symbol, quantity)
else:
    self.debug("You don't have sufficient margin for this order.")</pre>
    </div>
</ol>
